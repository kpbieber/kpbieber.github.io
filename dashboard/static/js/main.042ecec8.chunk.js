(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_redux__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(22),TextBox=function(_Component){function TextBox(){var _getPrototypeOf2,_this;Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TextBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,(_getPrototypeOf2=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(TextBox)).call.apply(_getPrototypeOf2,[this].concat(args))),_this.substitutions=function(text){var currentData=_this.props.currentData,_this$props$data=_this.props.data,attributes=_this$props$data.attributes,asset=_this$props$data.asset,assetDef=_this$props$data.assetDef;try{return eval("`"+text+"`")}catch(e){return text}},_this}return Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(TextBox,_Component),Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(TextBox,[{key:"render",value:function(){var e=this.props.tile.properties.text;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("section",{style:{width:"100%",height:"100%",position:"relative"}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.substitutions(e)}}))}}]),TextBox}(react__WEBPACK_IMPORTED_MODULE_5__.Component);function mapStateToProps(e){return{data:e.data,currentData:e.currentData}}TextBox.defaultProps={data:void 0},__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__.b)(mapStateToProps)(TextBox)},189:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(33),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(27),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),react_redux__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(45),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),react_icons_fi__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(52),react_spinners__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77),react_spinners__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_spinners__WEBPACK_IMPORTED_MODULE_11__),_util_keys__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(35),primereact_datatable__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(104),primereact_datatable__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(primereact_datatable__WEBPACK_IMPORTED_MODULE_13__),primereact_column__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(92),primereact_column__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(primereact_column__WEBPACK_IMPORTED_MODULE_14__),primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(34),primereact_inputtext__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__),_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(86),_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16__),CustomTable=function(_Component){function CustomTable(){var _getPrototypeOf2,_this;Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,CustomTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__.a)(this,(_getPrototypeOf2=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(CustomTable)).call.apply(_getPrototypeOf2,[this].concat(args))),_this.state={globalFilter:"",data:[],loading:!0},_this.header=react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{textAlign:"left"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("i",{className:"pi pi-search",style:{margin:"4px 4px 0 3rem"}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__.InputText,{type:"search",onChange:function(e){e.stopPropagation(),_this.setState({globalFilter:e.target.value})},placeholder:"Search",size:"50"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Refresh Data",onClick:function(e){_this.setState({loading:!0}),_this.fetchData()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_10__.c,{size:"1rem",style:{height:"1rem"}})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Export data as csv",onClick:function(e){_this.export()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_10__.e,{size:"1rem",style:{height:"1rem"},onClick:_this.export}))),_this.fetchData=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(){var properties,asset,url;return D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:properties=_this.props.tile.properties,asset=_this.props.data.asset,url=eval("`"+properties.url+"`"),axios__WEBPACK_IMPORTED_MODULE_9___default()({url:url,baseURL:_util_keys__WEBPACK_IMPORTED_MODULE_12__.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:_util_keys__WEBPACK_IMPORTED_MODULE_12__.a.TOKEN}}).then(function(e){_this.setState({data:e.data,loading:!1})}).catch(function(e){console.log(e),_this.setState({loading:!1})});case 4:case"end":return _context.stop()}},_callee,this)})),_this.export=function(){_this.dt.exportCSV()},_this.linkTemplate=function(e,t,a){var n=a(e).replace(/\^/g," ");return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})},_this.renderTable=function(){var _this$state=_this.state,data=_this$state.data,loading=_this$state.loading;if(loading)return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_spinners__WEBPACK_IMPORTED_MODULE_11__.ScaleLoader,{sizeUnit:"px",size:30,color:_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16___default.a.fontColor}));try{var columns=eval(_this.props.tile.properties.columns.replace(/\s/g,"")),dynamicCols=columns.map(function(e,t){return e.body?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_column__WEBPACK_IMPORTED_MODULE_14__.Column,{key:t,field:e.field,header:e.header,sortable:!0,body:function(t,a){return _this.linkTemplate(t,a,e.body)}}):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_column__WEBPACK_IMPORTED_MODULE_14__.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_datatable__WEBPACK_IMPORTED_MODULE_13__.DataTable,{ref:function(e){_this.dt=e},value:data,rows:10,paginator:!0,globalFilter:_this.state.globalFilter,header:_this.header},dynamicCols)}catch(err){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},"Invalid Input, please try again")}},_this}return Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(CustomTable,_Component),Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(CustomTable,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&this.fetchData()}},{key:"render",value:function(){var e=this.renderTable();return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"table-background",style:{height:"100%",width:"100%"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()}},e)))}}]),CustomTable}(react__WEBPACK_IMPORTED_MODULE_7__.Component);function mapStateToProps(e){return{data:e.data}}__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_8__.b)(mapStateToProps)(CustomTable)},195:function(e,t,a){e.exports=a(320)},312:function(e,t,a){e.exports={fontColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)"}},320:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"saveDashboard",function(){return R}),a.d(n,"loadDashboard",function(){return N}),a.d(n,"currentData",function(){return U}),a.d(n,"dataItemDefinitions",function(){return W}),a.d(n,"attributes",function(){return F}),a.d(n,"assetData",function(){return K}),a.d(n,"assetDefinitionData",function(){return G}),a.d(n,"toggleViewOnly",function(){return z}),a.d(n,"toggleSidebar",function(){return q}),a.d(n,"toggleModal",function(){return V}),a.d(n,"resetModal",function(){return H}),a.d(n,"addTile",function(){return X}),a.d(n,"deleteTile",function(){return Y}),a.d(n,"editTile",function(){return J}),a.d(n,"saveLayouts",function(){return $}),a.d(n,"addTab",function(){return Q}),a.d(n,"editTab",function(){return Z}),a.d(n,"deleteTab",function(){return ee}),a.d(n,"changeTab",function(){return te});var r=a(2),l=a.n(r),i=a(80),o=a.n(i),s=a(22),c=a(96),u=a(179),d=a(180),m=a(68),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILE":var a=t.activeTab,n=t.id,r=t.tile,l=e,i=Object(m.a)(e[a.index]).concat([{id:n,properties:r.properties,dataGrid:r.dataGrid}]);return l.splice(a.index,1,i),Object(m.a)(l);case"DELETE_TILE":var o=t.activeTab,s=t.id,c=e[o.index].filter(function(e){return e.id!==s}),u=e.slice(0);return u.splice(o.index,1,c),Object(m.a)(u);case"EDIT_TILE":var d=t.index,p=t.newTile,h=e[d].filter(function(e){return e.id!==p.id});h.push(p);var _=e.slice(0);return _.splice(d,1,h),Object(m.a)(_);case"ADD_TAB":return Object(m.a)(e).concat([[]]);case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index});case"LOAD_DASHBOARD":return t.payload.data.tiles?t.payload.data.tiles:e;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_LAYOUT":var a=t.layouts,n=t.tab,r=e.slice(0);return r.splice(n.index,1,a),r;case"ADD_TAB":return Object(m.a)(e).concat([{}]);case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index});case"SAVE_DASHBOARD":return e;case"LOAD_DASHBOARD":return t.payload.data.layouts?t.payload.data.layouts:e;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"default",index:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TAB":return t.tab?t.tab:e;default:return e}},b=a(36),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{name:"default",index:0}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAB":return Object(m.a)(e).concat([t.tab]);case"EDIT_TAB":return e.map(function(e){return e.id===t.tab.id?Object(b.a)({},e,{name:t.name}):e});case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index}).map(function(e,a){return e.index>t.index?{name:e.name,index:e.index-1}:e});case"LOAD_DASHBOARD":return t.payload.data.tabs?t.payload.data.tabs:e;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebar:!1,modal:{visible:!1,tile:null},viewOnly:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIDEBAR":var a=!e.sidebar;return Object(b.a)({},e,{sidebar:a});case"TOGGLE_MODAL":return Object(b.a)({},e,{modal:{visible:!0,tile:t.tile}});case"RESET_MODAL":return Object(b.a)({},e,{modal:{visible:!1,tile:null}});case"EDIT_TILE":return Object(b.a)({},e,{modal:Object(b.a)({},e.modal,{tile:t.tile})});case"TOGGLE_VIEWONLY":return Object(b.a)({},e,{viewOnly:!e.viewOnly});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATAITEM_DEFINITIONS":var a=t.payload,n=a.reduce(function(e,t){return e[t.dataItemId]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{dataItemDefinitions:{array:a,object:n}});case"ATTRIBUTES_DATA":if(200===t.payload.status){var r=t.payload.data,l=r.reduce(function(e,t){return e[t.attributeName]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{attributes:{array:r,object:l}})}return console.log(t.payload),Object(b.a)({},e,{attributes:{array:[],object:{}}});case"ASSET_DATA":return 200===t.payload.status?Object(b.a)({},e,{asset:t.payload.data}):(console.log(t.payload),Object(b.a)({},e,{asset:null}));case"ASSET_DEFINITION_DATA":return 200===t.payload.status?Object(b.a)({},e,{assetDef:t.payload.data}):(console.log(t.payload),Object(b.a)({},e,{assetDef:null}));default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_DATA":if(200===t.payload.status){var a=t.payload.data,n=a.reduce(function(e,t){return e[t.dataItemId]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{array:a,object:n})}return console.log(t.payload),Object(b.a)({},e,{array:[],object:{}});default:return e}},y=Object(c.combineReducers)({activeTab:_,tabs:v,tiles:p,layouts:h,ui:f,currentData:E,data:g});var D=a(33),O=a.n(D),x=a(44),T=a(23),C=a(24),I=a(26),w=a(25),k=a(27),j=a(77),A=a(45),M=a.n(A),S=a(35),L=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},P=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},B=function(){var e=Object(x.a)(O.a.mark(function e(){var t,a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.location.href.toLowerCase().match("login")){e.next=15;break}return sessionStorage.destination=window.location.href,(t=P("authJWT"))&&(document.cookie="authJWT=".concat(t)),e.prev=4,e.next=7,M()({url:"/api/Auth/Status",baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json"}});case 7:a=e.sent,"valid"===a.data.login?sessionStorage.destination=window.location.href:window.location.href="/login",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),window.location.href="/login";case 15:case"end":return e.stop()}},e,this,[[4,12]])}));return function(){return e.apply(this,arguments)}}(),R=function(e,t,a){return function(){var n=Object(x.a)(O.a.mark(function n(r){var l,i,o;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=P("dashboardId"),i="/api/dashboards/".concat(l),n.next=4,M()({url:i,baseURL:S.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN},data:JSON.stringify({tiles:e,layouts:t,tabs:a})});case 4:o=n.sent,r({type:"SAVE_DASHBOARD",payload:o.data});case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},N=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r,l,i,o,s,c;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=P("dashboardId"),n=P("assetDefinitionId"),r=P("assetId"),a){e.next=20;break}return e.next=6,M()({url:"/api/assetDefinitions/".concat(n,"/Dashboards"),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}});case 6:if(0===(l=e.sent).data.length){e.next=11;break}a=l.data[0].dashboardId,e.next=18;break;case 11:return i={dashboardId:0,dashboardName:"assetdef16dashboard",systemDefinitionId:null,assetDefinitionId:n,config:" "},e.next=14,M()({url:"/api/dashboards",baseURL:S.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN},data:JSON.stringify(i)});case 14:o=e.sent,a=o[0].dashboardId,alert("No dashboard for this asset was found, creating a new one"),console.log(a);case 18:s=window.location.protocol+"//"+window.location.host+window.location.pathname+"?dashboardId=".concat(a,"&assetDefinitionId=").concat(n,"&assetId=").concat(r),window.history.pushState({path:s},"",s);case 20:return e.next=22,M()({url:"/api/dashboards/".concat(a),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}});case 22:c=e.sent,t({type:"LOAD_DASHBOARD",payload:c});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},U=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),n="/api/Assets/".concat(a,"/currentDataItems"),e.next=4,M()({url:n,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 4:r=e.sent,t({type:"CURRENT_DATA",payload:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r,l,i,o,s,c,u;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),n=P("assetDefinitionId"),r="/api/assetDefinitions/".concat(n,"/dataItemDefinitions"),e.next=5,M()({url:r,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 5:return l=e.sent,i="/api/Assets/".concat(a,"/currentDataItems"),e.next=9,M()({url:i,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 9:return o=e.sent,e.next=12,Promise.all([l,o]);case 12:s=l.data,c=o.data,u=s.map(function(e){var t=c.find(function(t){return t.dataItemId===e.dataItemId}),a=t?t.alias:e.label;return Object(b.a)({},e,{label:a})}),t({type:"DATAITEM_DEFINITIONS",payload:u});case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),n="/api/assets/".concat(a,"/attributes"),e.next=4,M()({url:n,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 4:r=e.sent,t({type:"ATTRIBUTES_DATA",payload:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},K=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),n="/api/assets/".concat(a),e.next=4,M()({url:n,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 4:r=e.sent,t({type:"ASSET_DATA",payload:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},G=function(){return function(){var e=Object(x.a)(O.a.mark(function e(t){var a,n,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetDefinitionId"),n="/api/assetdefinitions/".concat(a),e.next=4,M()({url:n,baseURL:S.a.BASE_URL,method:"GET",headers:{Authorization:S.a.TOKEN,"Content-Type":"application/json"}});case 4:r=e.sent,t({type:"ASSET_DEFINITION_DATA",payload:r});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},z=function(){return{type:"TOGGLE_VIEWONLY"}},q=function(){return{type:"TOGGLE_SIDEBAR"}},V=function(e){return{type:"TOGGLE_MODAL",tile:e}},H=function(){return{type:"RESET_MODAL"}},X=function(e,t){var a={dataGrid:{x:999,y:0,w:20,h:10},properties:e};return{type:"ADD_TILE",id:L(),tile:a,activeTab:t}},Y=function(e,t){return{type:"DELETE_TILE",id:e,activeTab:t}},J=function(e,t){return{type:"EDIT_TILE",newTile:e,index:t}},$=function(e,t){return{type:"SAVE_LAYOUT",layouts:e,tab:t}},Q=function(e){return{type:"ADD_TAB",tab:e}},Z=function(e,t){return{type:"EDIT_TAB",tab:e,name:t}},ee=function(e){return{type:"DELETE_TAB",index:e}},te=function(e){return{type:"CHANGE_TAB",tab:e}},ae=a(52),ne=a(84);var re=Object(s.b)(function(e){return{ui:e.ui,data:e.data}},n)(function(e){var t=e.toggleSidebar,a=e.toggleViewOnly,n=e.ui,r=e.data,i=r.asset,o=r.assetDef,s=n.viewOnly?"hidden":"",c=window.innerWidth>600?"block":"none",u=i&&o?"builder"===P("mode")?o.assetDefinitionName:i.assetAlias:"";return l.a.createElement("nav",{className:"navbar"},l.a.createElement("div",{className:"navbar-menu navbar-section",onClick:t,style:{cursor:"pointer",visibility:s}},l.a.createElement(ae.a,{style:{height:"1.75rem"},className:"navbar-menu-icon",size:"1.75rem"})),l.a.createElement("div",{className:"navbar-section"},l.a.createElement(ne.Checkbox,{style:{marginTop:".2rem",marginLeft:"1.5rem",borderRadius:"4px",backgroundColor:"#444 "},title:"Click to toggle",className:"",name:"viewOnly",checked:n.viewOnly,onChange:a}),l.a.createElement("label",{style:{color:"white",fontSize:".75rem",marginLeft:".5rem"},title:"Click checkbox to toggle",htmlFor:"viewOnly",className:"p-checkbox-label navbar-checkbox-label"},"View only mode")),l.a.createElement("h1",{style:{margin:0,marginLeft:"1rem"},className:"navbar-asset"},"".concat(u)),l.a.createElement("h1",{style:{display:c},className:"navbar-brand navbar-section"},"Lime Cloud"),l.a.createElement("div",{className:"navbar-section",style:{marginLeft:"auto",display:c}},l.a.createElement("ul",{style:{listStyle:"none",margin:0}},l.a.createElement("li",{className:"navbar-navitem"},l.a.createElement("a",{href:"../assets/list.shtml"},"Assets")),l.a.createElement("li",{className:"navbar-navitem"},l.a.createElement("a",{href:"../assetdefinitions/index.shtml"},"Asset Definitions")))))}),le=a(42),ie=a(182),oe=a(65),se=a(60),ce=a(34),ue=a(146),de=function(e){var t=e.handleChange,a=e.color,n=e.label,r=e.name;return l.a.createElement("div",{className:"color-picker"},l.a.createElement("span",{className:"color-picker-label"},n),l.a.createElement(ue.ColorPicker,{value:a,name:r,onChange:t,defaultColor:"000000"}),l.a.createElement(ce.InputText,{style:{border:"none",borderBottom:"1px solid #585858",width:"30%",backgroundColor:"inherit"},onChange:t,value:a,type:"text",name:r,className:"color-picker-color"}))},me=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItem:null,name:"",min:"",max:"",unit:"",band1:null,band1End:"",band2End:"",band2:null,band3:null},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItem,n=t.name,r=t.min,l=t.max,i=t.unit,o=t.band1,s=t.band1End,c=t.band2,u=t.band2End,d=t.band3;this.setState({dataItem:a,name:n,min:r,max:l,unit:i,band1:o,band1End:s,band2:c,band2End:u,band3:d})}}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.dataItem,n=e.min,r=e.max,i=e.unit,o=e.band1,s=e.band1End,c=e.band2,u=e.band2End,d=e.band3,m=this.dataItems;return l.a.createElement("div",{className:"component-form"},l.a.createElement(se.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:a,onChange:this.handleChange,options:m,placeholder:"Select a data item",filter:!0,filterBy:"label",required:!0}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:t,type:"text",onChange:this.handleChange,name:"name"}),l.a.createElement("label",{htmlFor:"name"},"Title")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:i,type:"text",onChange:this.handleChange,name:"unit"}),l.a.createElement("label",{htmlFor:"unit"},"Unit")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:n,type:"number",onChange:this.handleChange,name:"min",required:!0}),l.a.createElement("label",{htmlFor:"min"},"Min*")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:r,type:"number",onChange:this.handleChange,name:"max",required:!0}),l.a.createElement("label",{htmlFor:"max"},"Max*")),l.a.createElement(de,{color:o,handleChange:this.handleChange,label:"Band 1:",name:"band1"}),l.a.createElement("div",{className:"dialgauge-band-lengths"},l.a.createElement("span",{className:""},""===n?"min to ":"".concat(n," to ")),l.a.createElement(ce.InputText,{value:s,style:{width:"50%"},type:"number",onChange:this.handleChange,name:"band1End",placeholder:"Band 1 End*",required:!0})),l.a.createElement(de,{color:c,handleChange:this.handleChange,label:"Band 2:",name:"band2"}),l.a.createElement("div",{className:"dialgauge-band-lengths"},l.a.createElement("span",{className:""},""===s?"Band 1 End to ":"".concat(s," to ")),l.a.createElement(ce.InputText,{value:u,style:{width:"50%"},type:"number",onChange:this.handleChange,name:"band2End",placeholder:"Band 2 End*",required:!0})),l.a.createElement(de,{color:d,handleChange:this.handleChange,label:"Band 3:",name:"band3"}),l.a.createElement("div",{className:"dialgauge-band-lengths"},l.a.createElement("span",{className:""},""===u?"Band 2 End to ":"".concat(u," to ")),l.a.createElement("span",{className:""}," ",""===r?"max":r," ")),l.a.createElement("p",{style:{fontSize:"12px",marginTop:0,marginBottom:".5rem"}},"Band colors will default if not specifically selected"))}}]),t}(r.Component);var pe=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(me),he=a(115),_e=a(147),be=(a(168),[{label:"5 minutes ago",value:"five"},{label:"10 minutes ago",value:"ten"},{label:"half hour ago",value:"halfhour"},{label:"1 hour ago",value:"hour"}]),ve=[{label:"Live",value:"live"},{label:"Fixed",value:"fixed"}],fe=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItems:null,title:"",yaxis:"",liveStart:"",fixedStart:"",timeType:"live",legend:!0},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a.renderTimeSelection=function(){var e=a.state,t=e.timeType,n=e.liveStart,r=e.fixedStart;e.end;return"live"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement(se.Dropdown,{style:{width:"100%"},name:"liveStart",value:n,onChange:a.handleChange,options:be,placeholder:"Select a start time"})):"fixed"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{className:"input",type:"number",min:"0",max:"168",value:r,name:"fixedStart",onChange:a.handleChange}),l.a.createElement("label",{htmlFor:"fixedStart"},"Hours Ago"))):l.a.createElement("div",null,"Something went wrong")},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.title,n=t.yaxis,r=t.dataItems,l=t.liveStart,i=t.fixedStart,o=t.timeType,s=t.legend;this.setState({title:a,yaxis:n,liveStart:l,fixedStart:i,timeType:o,legend:s,dataItems:this.dataItems.filter(function(e){return r.find(function(t){return t.dataItemId===e.dataItemId})})})}}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.yaxis,n=e.dataItems,r=e.legend,i=e.timeType,o=this.renderTimeSelection();return l.a.createElement("section",{className:"component-form"},l.a.createElement("label",null,"Time Type: "),l.a.createElement(_e.SelectButton,{value:i,name:"timeType",options:ve,onChange:this.handleChange}),o,l.a.createElement(he.MultiSelect,{style:{maxHeight:"500px"},name:"dataItems",value:n,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,required:!0,scrollHeight:"300px"}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{className:"input",value:t,type:"text",onChange:this.handleChange,name:"title"}),l.a.createElement("label",{htmlFor:"title"},"Title")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{className:"input",value:a,type:"text",onChange:this.handleChange,name:"yaxis"}),l.a.createElement("label",{htmlFor:"yaxis"},"Y-Axis Label")),l.a.createElement(ne.Checkbox,{checked:r,onChange:this.handleChange,name:"legend"}),l.a.createElement("label",{htmlFor:"legend",className:"p-checkbox-label"},"Display Legend"))}}]),t}(r.Component);var ge=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(fe),Ee=a(183),ye=a(184),De=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={text:a.props.ui.modal.tile?a.props.ui.modal.tile.properties.text:"",items:[]},a.handleChange=function(e){var t=a.props.addData;a.setState({text:e.htmlValue},function(){t({text:a.state.text})})},a.addText=function(e){var t=a.state.text;a.setState({text:t+e})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentData,a=this.props.data.attributes;this.setState({items:[{label:"Data Items",items:t.array.map(function(t){return{label:t.alias,items:[{label:"Alias",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].alias}"))}},{label:"Value",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].value}"))}},{label:"Timestamp",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].timestamp}"))}},{label:"Unit",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].unit}"))}}]}})},{label:"Attributes",items:a.array.map(function(t){return{label:t.attributeName,items:[{label:"Name",command:function(){e.addText("${attributes.object['".concat(t.attributeName,"'].attributeName}"))}},{label:"Value",command:function(){e.addText("${attributes.object['".concat(t.attributeName,"'].attributeValue}"))}}]}})}]})}},{key:"render",value:function(){var e=this.state.text;return l.a.createElement("section",{className:"component-form"},l.a.createElement(Ee.Editor,{style:{display:"inline-block",height:"300px",width:"inherit"},name:"text",value:e,onTextChange:this.handleChange,placeholder:"Your text here"}),l.a.createElement("div",{style:{overflow:"scroll",maxHeight:"200px"}},l.a.createElement(ye.PanelMenu,{model:this.state.items,style:{overflow:"scroll"}})))}}]),t}(r.Component);var Oe=Object(s.b)(function(e){return{ui:e.ui,data:e.data,currentData:e.currentData}})(De),xe=a(93),Te=a.n(xe),Ce=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={axes:[{label:"yaxis0",min:"",max:""}],series:[{dataItem:null,axis:null,color:""}]},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e,t,n){if("axis"===n){var r=Object(m.a)(a.state.axes);r[t][e.target.name]=e.target.value,a.setState({axes:r})}else if("series"===n){var l=Object(m.a)(a.state.series);l[t][e.target.name]=e.target.value,a.setState({series:l})}},a.addAxis=function(e){e.preventDefault();var t=a.state.axes.length;a.setState(function(e){return{axes:Object(m.a)(e.axes).concat([{label:"yaxis".concat(t),min:"",max:""}])}})},a.addSeries=function(e){e.preventDefault(),a.setState(function(e){return{series:Object(m.a)(e.series).concat([{dataItem:"",axis:"",color:""}])}})},a.renderSeries=function(e,t){var n=a.state,r=n.series,i=n.axes;return l.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"1rem"}},l.a.createElement(se.Dropdown,{name:"dataItem",className:"multiaxis-form-field",style:{width:"30%",marginLeft:"0"},options:a.dataItems,optionLabel:"label",value:r[t].dataItem,onChange:function(e){return a.handleChange(e,t,"series")},filter:!0,filterBy:"label",placeholder:"Choose data item",required:!0}),l.a.createElement(se.Dropdown,{name:"axis",className:"multiaxis-form-field",style:{width:"30%"},options:i,optionLabel:"label",value:r[t].axis,onChange:function(e){return a.handleChange(e,t,"series")},filter:!0,placeholder:"Choose Y-Axis",required:!0}),l.a.createElement(ue.ColorPicker,{name:"color",className:"multiaxis-form-field",style:{width:"10%"},value:r[t].color,onChange:function(e){return a.handleChange(e,t,"series")},defaultColor:"000000"}),l.a.createElement("span",{className:"multiaxis-form-field",style:{width:"10%",textAlign:"center",verticalAlign:"middle"}},l.a.createElement(ae.g,{size:"1.5rem",onClick:function(e){return a.handleDelete(e,t,"series")},style:{cursor:"pointer"}})))},a.renderAxes=function(e,t){var n=a.state.axes;return l.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"1rem"}},l.a.createElement(ce.InputText,{style:{width:"30%",marginLeft:"0"},className:"multiaxis-form-field",type:"text",value:n[t].label,onChange:function(e){return a.handleChange(e,t,"axis")},name:"label"}),l.a.createElement(ce.InputText,{className:"multiaxis-form-field",name:"min",style:{width:"20%"},value:n[t].min,onChange:function(e){return a.handleChange(e,t,"axis")},placeholder:"min",type:"number"}),l.a.createElement(ce.InputText,{className:"multiaxis-form-field",name:"max",style:{width:"20%"},value:n[t].max,onChange:function(e){return a.handleChange(e,t,"axis")},placeholder:"max",type:"number"}),l.a.createElement("span",{className:"multiaxis-form-field",style:{width:"10%",textAlign:"center",verticalAlign:"middle"}},l.a.createElement(ae.g,{size:"1.5rem",onClick:function(e){return a.handleDelete(e,t,"axis")},style:{cursor:"pointer"}})))},a.handleDelete=function(e,t,n){var r=a.state,l=r.axes,i=r.series;"axis"===n?a.setState({axes:l.filter(function(e,a){return a!==t})}):"series"===n&&a.setState({series:i.filter(function(e,a){return a!==t})})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.ui.modal.tile;if(t){var a=t.properties,n=a.axes,r=a.series,l=r.map(function(t){var a=e.dataItems.find(function(e){return e.dataItemId===t.dataItem.dataItemId});return console.log(a),Object(b.a)({},t,{dataItem:a})});0!==r.length&&this.setState({series:l}),0!==n.length&&this.setState({axes:n})}}},{key:"render",value:function(){var e=this.state,t=e.axes,a=e.series,n=this.props,r=n.submitModal,i=n.closeModal;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{maxHeight:"700px",overflow:"scroll"}},l.a.createElement("div",{style:{marginBottom:"1rem"}},l.a.createElement("div",{style:{marginBottom:"1rem"}},l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%",marginLeft:"0"}},"Label"),l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"20%"}},"Minimum"),l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"20%"}},"Maximum"),l.a.createElement("span",{className:"multiaxis-form-header"},"Delete")),t.map(this.renderAxes),l.a.createElement(oe.Button,{label:"Add Axis",onClick:this.addAxis,style:{marginRight:"1rem"}}),l.a.createElement("span",null,"Note: If no min/max is specified the axis will autoscale.")),l.a.createElement("div",null,l.a.createElement("div",{style:{marginBottom:"1rem"}},l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%",marginLeft:"0"}},"Data Item"),l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%"}},"Y Axis"),l.a.createElement("span",{className:"multiaxis-form-header",style:{width:"10%"}},"Color"),l.a.createElement("span",{className:"multiaxis-form-header"},"Delete")),a.map(this.renderSeries),l.a.createElement(oe.Button,{style:{marginRight:"1rem"},label:"Add Series",onClick:this.addSeries}),l.a.createElement("span",null,"Note: Color will default if none specifically selected.")),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(oe.Button,{label:"Submit",icon:"pi pi-check",onClick:function(e){return r(e,t,a)}}),l.a.createElement(oe.Button,{label:"Close",icon:"pi pi-times",onClick:i,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}}))))}}]),t}(r.Component);var Ie=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Ce),we=[{label:"5 minutes ago",value:"five"},{label:"10 minutes ago",value:"ten"},{label:"half hour ago",value:"halfhour"},{label:"1 hour ago",value:"hour"}],ke=[{label:"Live",value:"live"},{label:"Fixed",value:"fixed"}],je=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={series:[],title:"",axes:[],liveStart:"",fixedStart:"",timeType:"live",legend:!0,visible:!1},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a.openModal=function(e){e.stopPropagation(),e.preventDefault(),a.setState({visible:!0})},a.closeModal=function(e){e.stopPropagation(),e.preventDefault(),a.setState({visible:!1})},a.submitModal=function(e,t,n){e.preventDefault();var r=a.props.addData;a.setState({axes:t,series:n,visible:!1},function(){r(a.state)})},a.renderTimeSelection=function(){var e=a.state,t=e.timeType,n=e.liveStart,r=e.fixedStart;e.end;return"live"===t?l.a.createElement(se.Dropdown,{style:{width:"100%"},name:"liveStart",value:n,onChange:a.handleChange,options:we,placeholder:"Select a start time"}):"fixed"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{className:"input",type:"number",min:"0",max:"168",value:r,name:"fixedStart",onChange:a.handleChange}),l.a.createElement("label",{htmlFor:"fixedStart"},"Hours Ago"))):l.a.createElement("div",null,"Something went wrong")},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.title,n=t.axes,r=t.series,l=t.liveStart,i=t.fixedStart,o=t.timeType,s=t.legend;this.setState({title:a,axes:n,series:r,liveStart:l,fixedStart:i,timeType:o,legend:s})}}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.timeType,n=e.legend,r=e.series,i=e.axes,o=this.renderTimeSelection(),s="".concat(this.state.visible?"modal-show":"modal-hide");return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"component-form"},l.a.createElement("label",null,"Time Type: "),l.a.createElement(_e.SelectButton,{value:a,name:"timeType",options:ke,onChange:this.handleChange}),o,l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{className:"input",value:t,type:"text",onChange:this.handleChange,name:"title"}),l.a.createElement("label",{htmlFor:"title"},"Title")),l.a.createElement("div",null,l.a.createElement(ne.Checkbox,{checked:n,onChange:this.handleChange,name:"legend"}),l.a.createElement("label",{htmlFor:"legend",className:"p-checkbox-label"},"Display Legend")),l.a.createElement(oe.Button,{style:{marginBottom:"1rem"},onClick:this.openModal,label:"Graph Config"})),l.a.createElement("div",{className:"background ".concat(s)},l.a.createElement(Te.a,{handle:"div.tab-modal-header"},l.a.createElement("div",null,l.a.createElement("section",{className:"tab-modal ",style:{transform:"translate(0,0)",left:0,top:0,width:"600px"}},l.a.createElement("div",{className:"tab-modal-header",style:{cursor:"move"}},l.a.createElement("h1",null,"Axis and Plot Config")),l.a.createElement("div",{className:"modal-main"},l.a.createElement(Ie,{submitModal:this.submitModal,closeModal:this.closeModal,series:r,axes:i})))))))}}]),t}(r.Component);var Ae=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(je),Me=[{label:"DataItems",value:"dataItems"},{label:"Files",value:"files"},{label:"Alarms",value:"alarms"},{label:"Events",value:"events"}],Se=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={option:"",search:""},a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.option,n=t.search;this.setState({option:a,search:n})}}},{key:"render",value:function(){var e=this.state,t=e.option,a=e.search;return l.a.createElement("section",{className:"component-form"},l.a.createElement(se.Dropdown,{style:{width:"100%"},name:"option",value:t,options:Me,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose Table Type",required:!0}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:a,type:"text",onChange:this.handleChange,name:"search"}),l.a.createElement("label",{htmlFor:"search"},"Search")))}}]),t}(r.Component);var Le=Object(s.b)(function(e){return{ui:e.ui}})(Se),Pe=a(185),Be=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={url:"",columns:""},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.value?e.target.value:e.target.checked;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.url,n=t.columns;this.setState({url:a,columns:n})}}},{key:"render",value:function(){return l.a.createElement("section",{className:"component-form"},l.a.createElement(ce.InputText,{value:this.state.url,onChange:this.handleChange,placeholder:"Data Source eg. /api/...",name:"url"}),l.a.createElement(Pe.InputTextarea,{rows:15,columns:50,value:this.state.columns,onChange:this.handleChange,placeholder:'Columns: must be in the following format exactly, [{"header": "", "field":""}, {...}, etc].\r To make custom cells, add a "body" field to the column object. The field value must be a function that takes a data arguemnt and returns a string of valid html. Opening tags must also have a "^" after the tag name. Example, "body": () => {return "<a^ href="mylink.com" >data.field</a> (data)',name:"columns"}))}}]),t}(r.Component);var Re=Object(s.b)(function(e){return{ui:e.ui}})(Be),Ne=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={showAll:!1},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties.showAll;this.setState({showAll:t})}}},{key:"render",value:function(){var e=this.state.showAll;return l.a.createElement("section",{className:"component-form"},l.a.createElement(ne.Checkbox,{checked:e,onChange:this.handleChange,name:"showAll"}),l.a.createElement("label",{htmlFor:"showAll",className:"p-checkbox-label"},"Show All Assets"))}}]),t}(r.Component);var Ue=Object(s.b)(function(e){return{ui:e.ui}})(Ne),We=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItem:null,min:"",max:"",unit:"",name:"",fillColor:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItem,n=t.name,r=t.max,l=t.unit,i=t.color;this.setState({dataItem:a,name:n,max:r,unit:l,color:i})}}},{key:"render",value:function(){var e=this.state,t=e.dataItem,a=e.max,n=e.unit,r=e.color,i=e.name;return l.a.createElement("div",{className:"component-form"},l.a.createElement(se.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:t,onChange:this.handleChange,options:this.dataItems,placeholder:"Select a data item",filter:!0,filterBy:"label",required:!0}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:i,type:"text",onChange:this.handleChange,name:"name"}),l.a.createElement("label",{htmlFor:"name"},"Name")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:a,type:"number",onChange:this.handleChange,name:"max",required:!0}),l.a.createElement("label",{htmlFor:"max"},"Max*")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:n,type:"text",onChange:this.handleChange,name:"unit"}),l.a.createElement("label",{htmlFor:"unit"},"Unit")),l.a.createElement(de,{color:r,handleChange:this.handleChange,label:"Fill Color:",name:"color"}),l.a.createElement("p",{style:{fontSize:"12px",marginTop:0}},"Fill color will default if not specifically selected"))}}]),t}(r.Component);var Fe=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(We),Ke=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItems:[],max:"",unit:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItems,n=t.max;this.setState({dataItems:a,max:n})}}},{key:"render",value:function(){var e=this.state,t=e.dataItems,a=e.max,n=e.unit;return console.log(this.dataItems),l.a.createElement("div",{className:"component-form"},l.a.createElement(he.MultiSelect,{name:"dataItems",value:t,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,required:!0}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:a,type:"number",onChange:this.handleChange,name:"max"}),l.a.createElement("label",{htmlFor:"max"},"Max*")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:n,type:"text",onChange:this.handleChange,name:"unit"}),l.a.createElement("label",{htmlFor:"unit"},"Unit")))}}]),t}(r.Component);var Ge=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Ke),ze=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={url:""},a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties.url;this.setState({url:t})}}},{key:"render",value:function(){var e=this.state.url;return l.a.createElement("div",{className:"component-form"},l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{style:{width:"100%"},value:e,type:"text",onChange:this.handleChange,name:"url",required:!0}),l.a.createElement("label",{htmlFor:"url"},"url*")))}}]),t}(r.Component);var qe=Object(s.b)(function(e){return{ui:e.ui}})(ze),Ve=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItem:void 0,labelColor:"",valueColor:"",backgroundColor:"",timestamp:!1},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItem,n=t.labelColor,r=t.valueColor,l=t.backgroundColor,i=t.timestamp;this.setState({dataItem:a,labelColor:n,valueColor:r,backgroundColor:l,timestamp:i})}}},{key:"render",value:function(){var e=this.state,t=e.dataItem,a=e.labelColor,n=e.valueColor,r=e.backgroundColor,i=e.timestamp;return l.a.createElement("section",{className:"component-form"},l.a.createElement(se.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:t,onChange:this.handleChange,options:this.dataItems,placeholder:"Select a data item",filter:!0,filterBy:"label",required:!0}),l.a.createElement(de,{color:a,handleChange:this.handleChange,label:"Label Color",name:"labelColor"}),l.a.createElement(de,{color:n,handleChange:this.handleChange,label:"Value Color",name:"valueColor"}),l.a.createElement(de,{color:r,handleChange:this.handleChange,label:"Background",name:"backgroundColor"}),l.a.createElement(ne.Checkbox,{checked:i,onChange:this.handleChange,name:"timestamp"}),l.a.createElement("label",{htmlFor:"timestamp",className:"p-checkbox-label"},"Show Timestamp"))}}]),t}(r.Component);Ve.defaultProps={};var He=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Ve),Xe=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dataItems:null,title:"",color:"",max:"",min:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,n=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,n),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.title,n=t.dataItems,r=t.color,l=t.max,i=t.min;this.setState({title:a,color:r,max:l,min:i,dataItems:n})}}},{key:"render",value:function(){var e=this.state,t=e.dataItems,a=e.title,n=e.color,r=e.max,i=e.min;return l.a.createElement("section",{className:"component-form"},l.a.createElement(he.MultiSelect,{style:{maxHeight:"500px"},name:"dataItems",value:t,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,required:!0,scrollHeight:"300px"}),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:a,type:"text",onChange:this.handleChange,name:"title"}),l.a.createElement("label",{htmlFor:"title"},"Title")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:r,type:"number",onChange:this.handleChange,name:"max"}),l.a.createElement("label",{htmlFor:"max"},"Y-Axis Max")),l.a.createElement("span",{className:"p-float-label"},l.a.createElement(ce.InputText,{value:i,type:"number",onChange:this.handleChange,name:"min"}),l.a.createElement("label",{htmlFor:"min"},"Y-Axis Min")),l.a.createElement(de,{color:n,handleChange:this.handleChange,label:"Column color:",name:"color"}),l.a.createElement("span",null,"If min and max are not specificed the axis will autoscale"))}}]),t}(r.Component);var Ye=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Xe),Je=[{name:"Basic Graph",form:ge,value:"BasicGraph"},{name:"Advanced Graph",form:Ae,value:"AdvancedGraph"},{name:"Bar Graph",form:Ye,value:"BarGraph"},{name:"Indicator",form:He,value:"Indicator"},{name:"Dial Gauge",form:pe,value:"Gauge"},{name:"Cylinder Gauge",form:Fe,value:"CylinderGauge"},{name:"Solid Gauge",form:Ge,value:"SolidGauge"},{name:"Text/Image",form:Oe,value:"TextBox"},{name:"Basic Table",form:Le,value:"Table"},{name:"Custom Table",form:Re,value:"CustomTable"},{name:"Google Map",form:Ue,value:"Map"},{name:"iFrame",form:qe,value:"IframeTile"}],$e=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={properties:{type:null}},a.handleFormSubmit=function(e){e.preventDefault();var t=a.props.activeTab,n=a.state.properties;a.props.addTile(n,t),a.setState({properties:{type:null}})},a.handleSave=function(){var e=a.props,t=e.tiles,n=e.layouts,r=e.tabs;a.props.saveDashboard(t,n,r).then(function(){return alert("Dashboard has been saved!")})},a.handleChange=function(e){e.preventDefault(),a.setState({properties:Object(le.a)({},e.target.name,e.value),valid:!0})},a.handleData=function(e){a.setState({properties:Object(b.a)({},a.state.properties,e)})},a.renderForm=function(){var e=a.state.properties.type;if(e){var t=e.form;return l.a.createElement(t,{addData:a.handleData})}return l.a.createElement("div",{style:{marginBottom:"0"}})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ui,a=e.toggleSidebar;return l.a.createElement(ie.Sidebar,{className:"side",visible:t.sidebar,onHide:a,style:{border:"1px solid #595959"}},l.a.createElement("section",{style:{paddingTop:"2rem"}},l.a.createElement("div",null,l.a.createElement(oe.Button,{className:"p-button-raised",onClick:this.handleSave,label:"Save Dashboard"})),l.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sidebar-form"},l.a.createElement(se.Dropdown,{options:Je,style:{width:"100%"},value:this.state.properties.type,onChange:this.handleChange,name:"type",placeholder:"Select Tile Type",optionLabel:"name"}),this.renderForm(),l.a.createElement("div",null,l.a.createElement(oe.Button,{label:"Add Tile",type:"submit"})))))}}]),t}(r.Component);var Qe=Object(s.b)(function(e){return{tiles:e.tiles,layouts:e.layouts,tabs:e.tabs,activeTab:e.activeTab,ui:e.ui}},n)($e),Ze={Gauge:pe,CylinderGauge:Fe,SolidGauge:Ge,BasicGraph:ge,TextBox:Oe,Map:Ue,AdvancedGraph:Ae,Table:Le,CustomTable:Re,IframeTile:qe,Indicator:He,BarGraph:Ye},et=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={properties:{type:null}},a.handleData=function(e){var t=a.props.ui.modal.tile;a.setState({properties:Object(b.a)({},a.state.properties,{type:t.properties.type},e)})},a.renderForm=function(){var e=a.props.ui.modal.tile;if(e&&e.properties.type&&Ze[e.properties.type.value]){var t=Ze[e.properties.type.value];return l.a.createElement(t,{addData:a.handleData})}return l.a.createElement("div",null,"No Type Selected")},a.closeModal=function(){var e=a.props.resetModal;a.setState({properties:{type:null}}),e()},a.submitModal=function(){var e=a.props,t=e.resetModal,n=e.ui,r=e.editTile,l=e.activeTab,i=a.state.properties,o=Object(b.a)({},n.modal.tile,{properties:Object(b.a)({},i)});i.type&&r(o,l.index),a.setState({properties:{type:null}}),t()},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.ui,t="".concat(e.modal.visible?"modal-show":"modal-hide");return l.a.createElement("div",{className:"background ".concat(t)},l.a.createElement(Te.a,{handle:"div.modal-header"},l.a.createElement("div",null,l.a.createElement("section",{className:"modal"},l.a.createElement("div",{className:"modal-header",style:{cursor:"move"}},l.a.createElement("h1",{style:{margin:0,fontSize:"1.25rem"}},"Edit Tile:")),l.a.createElement("div",{className:"modal-main"},this.renderForm(),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(oe.Button,{label:"Submit",icon:"pi pi-check",onClick:this.submitModal}),l.a.createElement(oe.Button,{label:"Close",icon:"pi pi-times",onClick:this.closeModal,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}})))))))}}]),t}(r.Component);var tt=Object(s.b)(function(e){return{ui:e.ui,activeTab:e.activeTab}},n)(et),at=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={nextTab:a.props.tabs.length+1,visible:!1,name:"",type:""},a.renderTab=function(e,t){var n=a.props,r=n.activeTab,i=n.ui,o=i.viewOnly?"none":"",s="tab-item";return e.index===r.index&&(s+=" tab-active"),l.a.createElement("li",{key:t,className:s,style:{textAlign:"center"},onClick:function(){return a.props.changeTab(e)}},l.a.createElement("span",{name:"edit",onDoubleClick:i.viewOnly?null:function(t){return a.handleTabRename(t,e)},title:"".concat(e.name,"\nDouble click to edit tab name")}," ",e.name),l.a.createElement("span",{style:{display:o},className:"tab-delete",title:"Click to delete tab"},l.a.createElement(ae.g,{style:{height:"1rem"},className:"tab-delete tab-icon",size:"1rem",onClick:function(e){return a.handleDeleteTab(e,t)}})))},a.handleTabRename=function(e,t){e.preventDefault(),e.stopPropagation(),a.setState({name:t.name,type:t}),a.openModal()},a.handleAddTab=function(e){a.setState({type:"add"}),a.openModal()},a.handleDeleteTab=function(e,t,n){e.stopPropagation();var r=a.props,l=r.deleteTab,i=r.changeTab,o=r.tabs,s=r.activeTab;window.confirm("Are you sure you want to delete this tab?")&&(l(t,n),s.index===t&&i(o[0]))},a.handleSubmit=function(e){var t=a.state,n=t.nextTab,r=t.name,l=t.type,i=a.props.tabs.length;"add"===l?(a.props.addTab({name:"".concat(""!==r?r:"tab"+n),index:i,id:L()}),a.setState({nextTab:n+1,visible:!1,name:""})):"object"===typeof l&&(a.props.editTab(l,r),a.setState({visible:!1,name:""}))},a.closeModal=function(){a.setState({visible:!1,name:""})},a.openModal=function(){a.setState({visible:!0},function(){})},a.handleChange=function(e){e.preventDefault(),a.setState(Object(le.a)({},e.target.name,e.target.value))},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.state.type,a=this.props,n=a.tabs,r=a.ui.viewOnly?"none":"",i="".concat(this.state.visible?"modal-show":"modal-hide");return l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"tabs"},n&&n.map(this.renderTab),l.a.createElement(ae.b,{name:"add",style:{display:r,height:"1.75rem"},size:"1.75rem",className:"newtab-btn",title:"Create New Tab",onClick:function(t){return e.handleAddTab(t)}})),l.a.createElement("div",{className:"background ".concat(i),autoFocus:!1},l.a.createElement(Te.a,{handle:"div.tab-modal-header"},l.a.createElement("div",null,l.a.createElement("section",{className:"tab-modal"},l.a.createElement("div",{className:"tab-modal-header",style:{cursor:"move"}},l.a.createElement("h1",{style:{fontSize:"1.25rem"}},"add"===t?"Add New Tab":"Edit Tab Name")),l.a.createElement("div",{className:"modal-main"},l.a.createElement("div",null,l.a.createElement(ce.InputText,{placeholder:"Tab Name",ref:function(t){e.nameInput=t},name:"name",style:{width:"100%",marginBottom:"1rem"},value:this.state.name,onChange:this.handleChange})),l.a.createElement("div",{className:"modal-footer"},l.a.createElement(oe.Button,{label:"Submit",icon:"pi pi-check",onClick:function(t){return e.handleSubmit(t)}}),l.a.createElement(oe.Button,{label:"Close",icon:"pi pi-times",onClick:this.closeModal,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}}))))))))}}]),t}(r.Component);var nt=Object(s.b)(function(e){return{activeTab:e.activeTab,tabs:e.tabs,ui:e.ui}},n)(at),rt=a(156),lt=a(31),it=a(37),ot=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).chartInit=function(){var e=a.props.tile,t=e.id,n=e.properties,r=a.props.currentData.object,l=Number(n.min),i=Number(n.max),o=Number(n.band1End),s=Number(n.band2End);lt.j.commercialLicense=!0,a.chart=lt.h(t,it.g),a.chart.paddingRight=0,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=0,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.innerRadius=-8,a.chart.startAngle=135,a.chart.endAngle=405;var c=a.chart.xAxes.push(new it.m);c.min=+n.min,c.max=+n.max,c.strictMinMax=!0;var u=new lt.a;c.renderer.ticks.template.stroke="#fff",c.renderer.labels.template.radius=5,c.renderer.ticks.template.strokeOpacity=.35,c.renderer.grid.template.disabled=!0,c.renderer.ticks.template.length=-12,c.hiddenState.properties.opacity=1,c.hiddenState.properties.visible=!0,c.setStateOnChildren=!0,c.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"},{number:1e6,suffix:"M"},{number:1e9,suffix:"G"}],c.numberFormatter.numberFormat="#,###.#a";var d=c.axisRanges.create();d.value=l,d.endValue=o?(l+i)*o/i:.5*(l+i),d.axisFill.fillOpacity=.9,d.axisFill.fill=n.band1?"#".concat(n.band1):u.getIndex(0);var m=c.axisRanges.create();m.value=o?(l+i)*o/i:.5*(l+i),m.endValue=s?(i-l)*s/i+l:.8*(i-l)+l,m.axisFill.fillOpacity=.9,m.axisFill.fill=n.band2?"#".concat(n.band2):u.getIndex(2);var p=c.axisRanges.create();p.value=s?(i-l)*s/i+l:.8*(i-l)+l,p.endValue=i,p.axisFill.fillOpacity=.9,p.axisFill.fill=n.band3?"#".concat(n.band3):u.getIndex(4),a.label=a.chart.radarContainer.createChild(lt.d),a.label.isMeasured=!1,a.label.horizontalCenter="middle",a.label.verticalCenter="bottom",a.label.y=70,a.label.fontSize=20,a.label.text="".concat(n.min," ").concat(n.unit?n.unit:"");var h=a.chart.titles.create(),_=r[n.dataItem.dataItemId];h.text=""!==n.name?n.name:_?_.alias:"",h.marginBottom=15,a.hand=a.chart.hands.push(new it.c),a.updateValue()},a.updateValue=function(){var e=a.props.tile.properties,t=a.props.currentData.object;try{var n=t[e.dataItem.dataItemId].value.toFixed(2);a.hand.showValue(+n,1e3,lt.i.cubicOut),a.label.text="".concat(n," ").concat(e.unit)}catch(r){a.hand.showValue(e.min,1e3,lt.i.cubicOut),a.label.text="undefined"}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),this.updateValue()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props.tile.id;return l.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(r.Component);ot.defaultProps={};var st=Object(s.b)(function(e){return{currentData:e.currentData}})(ot),ct=[{date:"2012-07-27",value:13},{date:"2012-07-28",value:11},{date:"2012-07-29",value:15},{date:"2012-07-30",value:16},{date:"2012-07-31",value:18},{date:"2012-08-01",value:13},{date:"2012-08-02",value:22},{date:"2012-08-03",value:23},{date:"2012-08-04",value:20},{date:"2012-08-05",value:17},{date:"2012-08-06",value:16},{date:"2012-08-07",value:18},{date:"2012-08-08",value:21},{date:"2012-08-09",value:26},{date:"2012-08-10",value:24},{date:"2012-08-11",value:29},{date:"2012-08-12",value:32},{date:"2012-08-13",value:18},{date:"2012-08-14",value:24},{date:"2012-08-15",value:22},{date:"2012-08-16",value:18},{date:"2012-08-17",value:19},{date:"2012-08-18",value:14},{date:"2012-08-19",value:15},{date:"2012-08-20",value:12},{date:"2012-08-21",value:8},{date:"2012-08-22",value:9},{date:"2012-08-23",value:8},{date:"2012-08-24",value:7},{date:"2012-08-25",value:5},{date:"2012-08-26",value:11},{date:"2012-08-27",value:13},{date:"2012-08-28",value:18},{date:"2012-08-29",value:20},{date:"2012-08-30",value:29},{date:"2012-08-31",value:33},{date:"2012-09-01",value:42},{date:"2012-09-02",value:35},{date:"2012-09-03",value:31},{date:"2012-09-04",value:47},{date:"2012-09-05",value:52},{date:"2012-09-06",value:46},{date:"2012-09-07",value:41},{date:"2012-09-08",value:43},{date:"2012-09-09",value:40},{date:"2012-09-10",value:39},{date:"2012-09-11",value:34},{date:"2012-09-12",value:29},{date:"2012-09-13",value:34},{date:"2012-09-14",value:37},{date:"2012-09-15",value:42},{date:"2012-09-16",value:49},{date:"2012-09-17",value:46},{date:"2012-09-18",value:47},{date:"2012-09-19",value:55},{date:"2012-09-20",value:59},{date:"2012-09-21",value:58},{date:"2012-09-22",value:57},{date:"2012-09-23",value:61},{date:"2012-09-24",value:59},{date:"2012-09-25",value:67},{date:"2012-09-26",value:65},{date:"2012-09-27",value:61},{date:"2012-09-28",value:66},{date:"2012-09-29",value:69},{date:"2012-09-30",value:71},{date:"2012-10-01",value:67},{date:"2012-10-02",value:63},{date:"2012-10-03",value:46},{date:"2012-10-04",value:32},{date:"2012-10-05",value:21},{date:"2012-10-06",value:18},{date:"2012-10-07",value:21},{date:"2012-10-08",value:28},{date:"2012-10-09",value:27},{date:"2012-10-10",value:36},{date:"2012-10-11",value:33},{date:"2012-10-12",value:31},{date:"2012-10-13",value:30},{date:"2012-10-14",value:34},{date:"2012-10-15",value:38},{date:"2012-10-16",value:37},{date:"2012-10-17",value:44},{date:"2012-10-18",value:49},{date:"2012-10-19",value:53},{date:"2012-10-20",value:57},{date:"2012-10-21",value:60},{date:"2012-10-22",value:61},{date:"2012-10-23",value:69},{date:"2012-10-24",value:67},{date:"2012-10-25",value:72},{date:"2012-10-26",value:77},{date:"2012-10-27",value:75},{date:"2012-10-28",value:70},{date:"2012-10-29",value:72},{date:"2012-10-30",value:70},{date:"2012-10-31",value:72},{date:"2012-11-01",value:73},{date:"2012-11-02",value:67},{date:"2012-11-03",value:68},{date:"2012-11-04",value:65},{date:"2012-11-05",value:71},{date:"2012-11-06",value:75},{date:"2012-11-07",value:74},{date:"2012-11-08",value:71},{date:"2012-11-09",value:76},{date:"2012-11-10",value:77},{date:"2012-11-11",value:81},{date:"2012-11-12",value:83},{date:"2012-11-13",value:80},{date:"2012-11-14",value:81},{date:"2012-11-15",value:87},{date:"2012-11-16",value:82},{date:"2012-11-17",value:86},{date:"2012-11-18",value:80},{date:"2012-11-19",value:87},{date:"2012-11-20",value:83},{date:"2012-11-21",value:85},{date:"2012-11-22",value:84},{date:"2012-11-23",value:82},{date:"2012-11-24",value:73},{date:"2012-11-25",value:71},{date:"2012-11-26",value:75},{date:"2012-11-27",value:79},{date:"2012-11-28",value:70},{date:"2012-11-29",value:73},{date:"2012-11-30",value:61},{date:"2012-12-01",value:62},{date:"2012-12-02",value:66},{date:"2012-12-03",value:65},{date:"2012-12-04",value:73},{date:"2012-12-05",value:79},{date:"2012-12-06",value:78},{date:"2012-12-07",value:78},{date:"2012-12-08",value:78},{date:"2012-12-09",value:74},{date:"2012-12-10",value:73},{date:"2012-12-11",value:75},{date:"2012-12-12",value:70},{date:"2012-12-13",value:77},{date:"2012-12-14",value:67},{date:"2012-12-15",value:62},{date:"2012-12-16",value:64},{date:"2012-12-17",value:61},{date:"2012-12-18",value:59},{date:"2012-12-19",value:53},{date:"2012-12-20",value:54},{date:"2012-12-21",value:56},{date:"2012-12-22",value:59},{date:"2012-12-23",value:58},{date:"2012-12-24",value:55},{date:"2012-12-25",value:52},{date:"2012-12-26",value:54},{date:"2012-12-27",value:50},{date:"2012-12-28",value:50},{date:"2012-12-29",value:51},{date:"2012-12-30",value:52},{date:"2012-12-31",value:58},{date:"2013-01-01",value:60},{date:"2013-01-02",value:67},{date:"2013-01-03",value:64},{date:"2013-01-04",value:66},{date:"2013-01-05",value:60},{date:"2013-01-06",value:63},{date:"2013-01-07",value:61},{date:"2013-01-08",value:60},{date:"2013-01-09",value:65},{date:"2013-01-10",value:75},{date:"2013-01-11",value:77},{date:"2013-01-12",value:78},{date:"2013-01-13",value:70},{date:"2013-01-14",value:70},{date:"2013-01-15",value:73},{date:"2013-01-16",value:71},{date:"2013-01-17",value:74},{date:"2013-01-18",value:78},{date:"2013-01-19",value:85},{date:"2013-01-20",value:82},{date:"2013-01-21",value:83},{date:"2013-01-22",value:88},{date:"2013-01-23",value:85},{date:"2013-01-24",value:85},{date:"2013-01-25",value:80},{date:"2013-01-26",value:87},{date:"2013-01-27",value:84},{date:"2013-01-28",value:83},{date:"2013-01-29",value:84},{date:"2013-01-30",value:81}],ut=a(86),dt=a.n(ut),mt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a.chartInit=Object(x.a)(O.a.mark(function e(){var t,n,r,l,i,o,s,c,u,d,m,p;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.tile,n=t.id,r=t.properties,l=a.props.currentData,lt.j.commercialLicense=!0,a.chart=lt.h(n,it.n),a.chart.paddingRight=10,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=10,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.exporting.menu=new lt.b,a.chart.exporting.menu.verticalAlign="bottom",a.chart.exporting.menu.align="left",(i=a.chart.xAxes.push(new it.f)).tooltipDateFormat="HH:mm:ss",i.baseInterval={timeUnit:"second",count:1},i.renderer.minGridDistance=75,i.renderer.grid.template.location=.5,i.startLocation=.5,i.endLocation=.5,e.prev=22,!r.dataItems){e.next=29;break}return e.next=26,a.fetchData();case 26:e.t0=e.sent,e.next=30;break;case 29:e.t0=ct;case 30:a.chart.data=e.t0,e.next=39;break;case 33:return e.prev=33,e.t1=e.catch(22),console.log(e.t1),a.setState({loading:"failed"}),a.chart.dispose(),e.abrupt("return");case 39:if((o=a.chart.yAxes.push(new it.m)).title.text=""!==r.yaxis?r.yaxis:"",o.renderer.line.strokeOpacity=1,o.renderer.line.strokeWidth=2,o.renderer.grid.template.disabled=!0,a.chart.cursor=new it.p,a.chart.cursor.behavior="panXY",a.chart.cursor.xAxis=i,r.dataItems)for(s=P("assetId"),c=0;c<r.dataItems.length;c++)u=l.object[r.dataItems[c].dataItemId],d=u.alias,m="".concat(s,"-").concat(u.dataItemId),a.createSeries(m,"timestamp",d);else a.createSeries("value","date","No dataItems selected");a.chart.scrollbarX=new lt.f,a.chart.scrollbarX.parent=a.chart.bottomAxesContainer,a.chart.legend=r.legend?new it.h:null,(p=a.chart.titles.create()).text=""!==r.title?r.title:"",p.marginBottom=5,a.setState({loading:!1});case 55:case"end":return e.stop()}},e,this,[[22,33]])})),a.fetchData=Object(x.a)(O.a.mark(function e(){var t,n,r,l,i,o,s,c,u,d,m;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile.properties,n=t.dataItems,r=t.timeType,l=t.liveStart,i=t.fixedStart,o=P("assetId"),s={five:new Date(new Date-3e5).toJSON(),ten:new Date(new Date-6e5).toJSON(),halfhour:new Date(new Date-18e5).toJSON(),hour:new Date(new Date-36e5).toJSON(),fixedStart:new Date(new Date-36e5*i).toJSON()},c="live"===r?l?s[l]:s.hour:s.fixedStart,u=(new Date).toJSON(),"/api/HistoricalDataItems",d=n.map(function(e){return{assetId:o,dataItemId:e.dataItemId}}),e.prev=7,e.next=10,M()({url:"/api/HistoricalDataItems",baseURL:S.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN},data:{Name:"request",DataItems:d,StartTime:c,EndTime:u,Format:{Type:"DataItemChart",Threshold:1e3}}});case 10:if(0===(m=e.sent).data.length){e.next=15;break}return e.abrupt("return",m.data.map(function(e){return Object(b.a)({},e,{assetId:o,timestamp:new Date(e.timestamp)})}));case 15:return e.abrupt("return",[{timestamp:new Date,value:0}]);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(7),e.abrupt("return",[{timestamp:new Date,value:0}]);case 21:case"end":return e.stop()}},e,this,[[7,18]])})),a.createSeries=function(e,t,n){a.props.tile.properties.timeType;var r=a.chart.series.push(new it.i);r.dataFields.valueY=e,r.dataFields.dateX=t,r.strokeWidth=1.5,r.name=n,r.minBulletDistance=20,r.interpolationDuration=0,r.transitionDuration=0,r.tooltipText="".concat(n,": {").concat(e,"}"),r.tooltip.background.cornerRadius=20,r.tooltip.background.strokeOpacity=0,r.tooltip.pointerOrientation="vertical",r.tooltip.label.minWidth=40,r.tooltip.label.minHeight=40,r.tooltip.label.textAlign="middle",r.tooltip.label.textValign="middle";var l=r.bullets.push(new it.b);l.circle.strokeWidth=1,l.circle.radius=2,l.circle.fill=lt.g("#fff"),l.states.create("hover").properties.scale=1.3},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData,n=this.props.data.asset,r=P("assetId");if(e.tile.properties!==t&&(this.chart.dispose(),this.setState({loading:!0}),this.chartInit()),"live"===t.timeType&&n.connected)try{for(var l={},i=0;i<t.dataItems.length;i++){var o=t.dataItems[i];l["".concat(r,"-").concat(o.dataItemId)]=a.object["".concat(o.dataItemId)]?a.object["".concat(o.dataItemId)].value:0}l.timestamp=new Date,0===this.chart.data.length?this.chart.data=[l]:this.chart.addData(l,1)}catch(s){console.log(s)}}},{key:"render",value:function(){var e=this,t=this.props.tile.id,a=this.state.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:!0===a?"block":"none"}},l.a.createElement(j.ScaleLoader,{sizeUnit:"px",size:30,color:dt.a.fontColor})),l.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:"failed"===a?"block":"none"}},"Something went wrong, try refreshing this tile"),l.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},l.a.createElement("span",{style:{position:"absolute",top:"-25px",left:"15px",zIndex:1e3,cursor:"pointer"},title:"Click to refresh graph"},l.a.createElement(ae.d,{style:{height:"1rem",marginLeft:".75rem",cursor:"pointer"},onClick:function(){e.setState({loading:!0}),e.chartInit()}})),l.a.createElement("div",{id:t,style:{width:"100%",height:"97%",position:"absolute",bottom:"0"}})))}}]),t}(r.PureComponent);mt.defaultProps={data:{currentData:{object:{},array:[]}}};var pt=Object(s.b)(function(e){return{data:e.data,currentData:e.currentData}})(mt),ht=a(187),_t=a(188),bt=window.google,vt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={overlays:[],options:{},loading:!0},a.onMapReady=Object(x.a)(O.a.mark(function e(){var t,n,r,l;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.data.asset,!a.props.tile.properties.showAll){e.next=8;break}return e.next=5,a.fetchData();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:n=e.t0,t&&bt&&(r=n?n.map(function(e){return new bt.maps.Marker({position:{lat:e.latitude,lng:e.longitude},title:e.assetAlias})}):[new bt.maps.Marker({position:{lat:t.latitude,lng:t.longitude},title:t.assetAlias})],l={center:t?{lat:t.latitude,lng:t.longitude}:{lat:29.7604,lng:-95.3698},zoom:10},a.setState({overlays:r,options:l,loading:!1}));case 11:case"end":return e.stop()}},e,this)})),a.fetchData=Object(x.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/assets",e.prev=1,e.next=4,M()({url:"/api/assets",baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[1,8]])})),a.onOverlayClick=function(e){},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&this.onMapReady()}},{key:"render",value:function(){var e=this.props.data.asset,t=this.state,a=t.overlays,n=t.loading,r={center:e?{lat:e.latitude,lng:e.longitude}:{lat:29.7604,lng:-95.3698},zoom:10};return e?l.a.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:function(e){return e.stopPropagation()}},l.a.createElement(_t.GMap,{options:r,overlays:a,onMapReady:this.onMapReady,style:{width:"100%",height:"100%"},onMouseDown:function(e){return e.stopPropagation()}})):l.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:!0===n?"block":"none"}},l.a.createElement(j.ScaleLoader,{sizeUnit:"px",size:30,color:dt.a.fontColor}))}}]),t}(r.Component);var ft=Object(s.b)(function(e){return{data:e.data}},n)(vt),gt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a.chartInit=Object(x.a)(O.a.mark(function e(){var t,n,r,l,i,o,s,c,u,d,m,p,h;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile,n=t.id,r=t.properties,l=a.props.currentData,lt.j.commercialLicense=!0,a.chart=lt.h(n,it.n),a.chart.paddingRight=10,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=10,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.exporting.menu=new lt.b,a.chart.exporting.menu.verticalAlign="bottom",a.chart.exporting.menu.align="left",e.prev=15,e.next=18,a.fetchData();case 18:a.chart.data=e.sent,e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(15),console.log(e.t0),a.setState({loading:"failed"}),a.chart.dispose(),e.abrupt("return");case 27:if((i=a.chart.xAxes.push(new it.f)).tooltipDateFormat="HH:mm:ss",i.baseInterval={timeUnit:"second",count:1},i.renderer.minGridDistance=100,i.renderer.grid.template.location=.5,i.startLocation=.5,i.endLocation=.5,a.chart.cursor=new it.p,a.chart.cursor.behavior="panXY",a.chart.cursor.xAxis=i,r.axes)for(o=0;o<r.axes.length;o++)s=o%2!==0,a.createAxes(r.axes[o],s);else a.chart.yAxes.push(new it.m);if(r.series)for(c=P("assetId"),u=0;u<r.series.length;u++){d=l.object[r.series[u].dataItem.dataItemId],m=d.alias,p="".concat(c,"-").concat(d.dataItemId);try{a.createSeries(p,"timestamp",m,r.series[u])}catch(_){console.log(_)}}else a.createSeries("value","date","default",a.chart.yAxes.values[0]);a.chart.scrollbarX=new lt.f,a.chart.scrollbarX.parent=a.chart.bottomAxesContainer,a.chart.legend=r.legend?new it.h:null,(h=a.chart.titles.create()).text=""!==r.title?r.title:"",h.marginBottom=5,a.setState({loading:!1});case 46:case"end":return e.stop()}},e,this,[[15,21]])})),a.fetchData=Object(x.a)(O.a.mark(function e(){var t,n,r,l,i,o,s,c,u,d,m;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile.properties,n=t.liveStart,r=t.fixedStart,l=t.timeType,i=t.series,o=P("assetId"),s={five:new Date(new Date-3e5).toJSON(),ten:new Date(new Date-6e5).toJSON(),halfhour:new Date(new Date-18e5).toJSON(),hour:new Date(new Date-36e5).toJSON(),fixedStart:new Date(new Date-36e5*r).toJSON()},c="live"===l?n?s[n]:s.hour:s.fixedStart,u=(new Date).toJSON(),"/api/HistoricalDataItems",d=i?i.map(function(e){return{assetId:o,dataItemId:e.dataItem?e.dataItem.dataItemId:0}}):{},e.prev=7,e.next=10,M()({url:"/api/HistoricalDataItems",baseURL:S.a.BASE_URL,method:"POST",timeout:5e3,headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN},data:{Name:"request",DataItems:d,StartTime:c,EndTime:u,Format:{Type:"DataItemChart",Threshold:1e3}}});case 10:if(0===(m=e.sent).data.length){e.next=15;break}return e.abrupt("return",m.data.map(function(e){return Object(b.a)({},e,{assetId:o,timestamp:new Date(e.timestamp)})}));case 15:return e.abrupt("return",[{timestamp:new Date,value:0}]);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(7),e.abrupt("return",[{timestamp:new Date,value:0}]);case 21:case"end":return e.stop()}},e,this,[[7,18]])})),a.createSeries=function(e,t,n,r){a.props.tile.properties.timeType;var l=a.chart.series.push(new it.i);l.dataFields.valueY=e,l.dataFields.dateX=t,l.strokeWidth=1.5,l.name=n,l.yAxis=r.axis?a[r.axis.label]:r,l.minBulletDistance=20,r.color&&""!==r.color&&(l.stroke=lt.g("#".concat(r.color)),l.fill=l.stroke),l.tooltipText="".concat(n,": {").concat(e,"}"),l.tooltip.background.cornerRadius=20,l.tooltip.background.strokeOpacity=0,l.tooltip.pointerOrientation="vertical",l.tooltip.label.minWidth=40,l.tooltip.label.minHeight=40,l.tooltip.label.textAlign="middle",l.tooltip.label.textValign="middle";var i=l.bullets.push(new it.b);i.circle.strokeWidth=1,i.circle.radius=2,i.circle.fill=lt.g("#fff"),i.states.create("hover").properties.scale=1.3},a.createAxes=function(e,t){a[e.label]=a.chart.yAxes.push(new it.m),a[e.label].title.text=""!==e.label?e.label:"",a[e.label].renderer.line.strokeOpacity=1,a[e.label].renderer.line.strokeWidth=2,a[e.label].renderer.grid.template.disabled=!0,a[e.label].renderer.opposite=t,a[e.label].min=""!==e.min?+e.min:null,a[e.label].max=""!==e.max?+e.max:null,""!==e.min&&""!==e.max&&(a[e.label].strictMinMax=!0)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chartInit();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData,n=this.props.data.asset,r=P("assetId");if(e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),"live"===t.timeType&&n.connected)try{for(var l={},i=0;i<t.series.length;i++)try{var o=t.series[i].dataItem;l["".concat(r,"-").concat(o.dataItemId)]=a.object["".concat(o.dataItemId)]?a.object["".concat(o.dataItemId)].value:0}catch(s){console.log(s)}l.timestamp=new Date,this.chart.addData(l,1)}catch(s){console.log(s)}}},{key:"render",value:function(){var e=this.props.tile.id,t=this.state.loading,a=t?"block":"none";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:"failed"===t?"block":"none"}},"Something went wrong, try refreshing this tile"),l.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:a}},l.a.createElement(j.ScaleLoader,{sizeUnit:"px",size:30,color:dt.a.fontColor})),l.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},l.a.createElement("div",{id:e,style:{width:"100%",height:"96%",position:"absolute",bottom:"0"},onMouseDown:function(e){return e.stopPropagation()}})))}}]),t}(r.PureComponent);gt.defaultProps={data:{currentData:{object:{},array:[]}}};var Et=Object(s.b)(function(e){return{currentData:e.currentData,data:e.data}})(gt);var yt=function(e){return l.a.createElement("div",null,l.a.createElement("p",{style:{textAlign:"center",margin:0}},"Either no type was selected or this tile type is deprecated, please delete and recreate this tile"))},Dt=a(104),Ot=a(92),xt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={globalFilter:"",data:[],loading:!0},a.fetchData=Object(x.a)(O.a.mark(function e(){var t,n,r,l;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.tile.properties,n=t.option,r=t.search,l=P("assetId"),e.t0=n.value,e.next="dataItems"===e.t0?5:"alarms"===e.t0?7:"events"===e.t0?9:"files"===e.t0?11:13;break;case 5:return a.setState({loading:!1,globalFilter:r}),e.abrupt("break",15);case 7:return M()({url:"/api/Assets/".concat(l,"/Alarms"),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:r})}),e.abrupt("break",15);case 9:return M()({url:"/api/Assets/".concat(l,"/Events"),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:r})}),e.abrupt("break",15);case 11:return M()({url:"/api/assets/".concat(l),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}}).then(function(e){var t=new Date(new Date-6048e5).toJSON(),n=e.data.serialNumber;M()({url:"/api/files?hostname=".concat(n,"&startDate=").concat(t),baseURL:S.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:S.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:r})})}),e.abrupt("break",15);case 13:return a.setState({loading:!1}),e.abrupt("break",15);case 15:case"end":return e.stop()}},e,this)})),a.export=function(){a.dt.exportCSV()},a.renderFileTable=function(){var e=a.state.data,t=[{header:"File Name",field:"filename"},{header:"Host Name",field:"hostname"},{header:"haspId",field:"haspId"},{header:"Timestamp",field:"timestamp"}].map(function(e,t){return"filename"===e.field?l.a.createElement(Ot.Column,{key:t,field:e.field,header:e.header,sortable:!0,body:function(e,t){return l.a.createElement("a",{href:"/api/files/".concat(e.fileId,"/download")},"".concat(e.filename))}}):l.a.createElement(Ot.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return l.a.createElement(Dt.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderEventTable=function(){var e=a.state.data,t=[{header:"Name",field:"name"},{header:"Cause",field:"cause"},{header:"Recieved",field:"received"},{header:"Timestamp",field:"timestamp"},{header:"Count",field:"count"}].map(function(e,t){return l.a.createElement(Ot.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return l.a.createElement(Dt.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderAlarmTable=function(){var e=a.state.data,t=[{header:"Name",field:"name"},{header:"Reason",field:"reason"},{header:"Cause",field:"cause"},{header:"Last Raised",field:"raised"},{header:"Severity",field:"severity"},{header:"Count",field:"count"}].map(function(e,t){return l.a.createElement(Ot.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return l.a.createElement(Dt.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderDataItemTable=function(){var e,t=a.state.globalFilter,n=a.props.currentData;n&&(e=n.array.filter(function(e){try{return e.alias.match(t)}catch(a){return e.alias.includes(t)}}).map(function(e){return Object(b.a)({},e,{value:Math.round(1e3*e.value)/1e3})}));var r=[{header:"Alias",field:"alias"},{header:"Value",field:"value"}].map(function(e,t){return l.a.createElement(Ot.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return l.a.createElement(Dt.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,header:a.header},r)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.setState({loading:!0}),this.fetchData())}},{key:"componentDidMount",value:function(){var e=this.props.tile.properties.search;this.setState({globalFilter:e}),this.fetchData()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,r=a.globalFilter,i=this.props.tile.properties.option;if(this.header=l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement(ce.InputText,{type:"search",value:r,onChange:function(e){e.stopPropagation(),console.log(e.target.value),t.setState({globalFilter:e.target.value})},placeholder:"Search",size:"50"}),l.a.createElement("span",{style:{marginLeft:"1rem",marginTop:".5rem",cursor:"pointer",display:"inline-block"},title:"Refresh Data",onClick:function(e){t.setState({loading:!0}),t.fetchData()}},l.a.createElement(ae.c,{size:"1rem",style:{height:"1rem"}})),l.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Export data as csv",onClick:function(e){t.export()}},l.a.createElement(ae.e,{size:"1rem",style:{height:"1rem"},onClick:this.export}))),n)return l.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},l.a.createElement(j.ScaleLoader,{sizeUnit:"px",size:30,color:"#fff"}));switch(i.value){case"dataItems":e=this.renderDataItemTable();break;case"alarms":e=this.renderAlarmTable();break;case"events":e=this.renderEventTable();break;case"files":e=this.renderFileTable();break;default:e=this.renderDataItemTable()}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"table-background",style:{height:"100%",width:"100%"}},l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()}},e)))}}]),t}(r.Component);var Tt=Object(s.b)(function(e){return{currentData:e.currentData}})(xt),Ct=a(189),It=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).chartInit=function(){var e=a.props.tile,t=e.id,n=e.properties,r=Number(n.max),l=a.props.currentData.object[n.dataItem.dataItemId],i=n.color;lt.j.commercialLicense=!0,a.chart=lt.h(t,it.o),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0;var o=a.chart.createChild(lt.d);o.text="Max: ".concat(r),o.align="center";var s=a.chart.createChild(lt.d);s.text=""!==n.name?n.name:"".concat(l.alias),s.align="center",s.isMeasured=!1,s.x=lt.k(50),s.horizontalCenter="middle",s.y=lt.k(0);var c=a.chart.xAxes.push(new it.a);c.dataFields.category="category",c.renderer.grid.template.location=0,c.renderer.grid.template.strokeOpacity=0;var u=a.chart.yAxes.push(new it.m);u.renderer.grid.template.strokeOpacity=0,u.min=-20,u.max=120,u.strictMinMax=!0,u.renderer.baseGrid.disabled=!0,u.numberFormatter=new lt.e,u.numberFormatter.numberFormat="";var d=a.chart.series.push(new it.e);d.dataFields.valueY="fillValue",d.dataFields.categoryX="category",d.columns.template.width=lt.k(80),d.columns.template.fillOpacity=.9,d.columns.template.strokeOpacity=1,d.columns.template.strokeWidth=2,""!==i&&(d.columns.template.fill="#".concat(i),d.columns.template.stroke="#".concat(i));var m=a.chart.series.push(new it.e);m.dataFields.valueY="emptyValue",m.dataFields.categoryX="category",m.stacked=!0,m.columns.template.width=lt.k(80),m.columns.template.fill=lt.g("#000"),m.columns.template.fillOpacity=.1,m.columns.template.stroke=lt.g("#000"),m.columns.template.strokeOpacity=.2,m.columns.template.strokeWidth=2,a.updateValue()},a.updateValue=function(){var e=a.props.tile.properties,t=a.props.currentData;try{var n=t.object[e.dataItem.dataItemId].value;a.chart.data=[{category:"".concat(Math.round(100*n)/100," ").concat(e.unit),fillValue:n/e.max*100,emptyValue:(e.max-n)/e.max*100}]}catch(r){a.chart.data=[{category:"undefined",fillValue:0,emptyValue:0}]}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),this.updateValue()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props.tile.id;return l.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(r.Component);It.defaultProps={};var wt=Object(s.b)(function(e){return{currentData:e.currentData}})(It),kt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).chartInit=function(){var e=a.props.tile,t=e.id,n=e.properties;a.chart=lt.h(t,it.j),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.startAngle=-90,a.chart.endAngle=180,a.chart.innerRadius=lt.k(10),a.chart.numberFormatter.numberFormat="#.##";var r=a.chart.yAxes.push(new it.a);r.dataFields.category="category",r.renderer.grid.template.location=0,r.renderer.grid.template.strokeOpacity=0,r.renderer.labels.template.horizontalCenter="right",r.renderer.labels.template.fontWeight=300,r.renderer.labels.template.adapter.add("fill",function(e,t){return t.dataItem.index>=0?a.chart.colors.getIndex(t.dataItem.index):e}),r.renderer.minGridDistance=10;var l=a.chart.xAxes.push(new it.m);l.renderer.grid.template.strokeOpacity=0,l.min=0,l.max=100,l.strictMinMax=!0,l.renderer.labels.template.adapter.add("text",function(e){return e>=100?"".concat(n.max," ").concat(n.unit?n.unit:""):e+"%"});var i=a.chart.series.push(new it.k);i.dataFields.valueX="full",i.dataFields.categoryY="category",i.clustered=!1,i.columns.template.fill=(new lt.c).getFor("alternativeBackground"),i.columns.template.fillOpacity=.08,i.columns.template.cornerRadiusTopLeft=20,i.columns.template.strokeWidth=0,i.columns.template.radarColumn.cornerRadius=20;var o=a.chart.series.push(new it.k);o.dataFields.valueX="value",o.dataFields.categoryY="category",o.clustered=!1,o.columns.template.strokeWidth=0,o.columns.template.tooltipText="[bold]{raw} ".concat(n.unit?n.unit:""),o.columns.template.radarColumn.cornerRadius=20,o.columns.template.adapter.add("fill",function(e,t){return a.chart.colors.getIndex(t.dataItem.index)}),a.chart.cursor=new it.l},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData;if(e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),t.dataItems&&a){for(var n=[],r=0;r<t.dataItems.length;r++){var l=t.dataItems[r],i=a.object[l.dataItemId];n[r]={category:i.alias,value:i.value/t.max*100,raw:i.value,full:t.max}}this.chart.data=n}}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props.tile.id;return l.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(r.Component);kt.defaultProps={};var jt=Object(s.b)(function(e){return{currentData:e.currentData}})(kt),At=a(190),Mt=function(e){function t(){return Object(T.a)(this,t),Object(I.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.tile,t=e.id,a=e.properties;return l.a.createElement("div",{id:t,style:{width:"96%",height:"96%",margin:"auto",marginTop:"1.5rem",paddingBottom:"1.5rem",borderRadius:"5px"}},l.a.createElement(At.a,{url:a.url,style:{borderRadius:"5px"},width:"100%",height:"100%",className:"",display:"initial",position:"relative",allowFullScreen:!0}))}}]),t}(r.Component),St=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.tile.properties,t=e.labelColor,a=e.valueColor,n=e.backgroundColor,r=e.timestamp,i=this.props.tile.properties.dataItem.dataItemId,o=this.props.currentData?this.props.currentData.object[i]:{alias:"undefined",value:"undefined"};return l.a.createElement("div",{className:"indicator",style:{width:"100%",height:"100%",textAlign:"center",backgroundColor:"#".concat(n)}},l.a.createElement("span",{style:{color:"#".concat(t)}},o.alias),l.a.createElement("br",null),l.a.createElement("span",{style:{color:"#".concat(a)}},o.isString?o.stringValue:"".concat(o.value.toFixed(2)," ").concat(o.unit)),l.a.createElement("br",null),l.a.createElement("span",{style:{color:"#".concat(a)}},r?new Date(o.timestamp).toLocaleString():""))}}]),t}(r.Component);St.defaultProps={};var Lt=Object(s.b)(function(e){return{currentData:e.currentData}})(St),Pt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).getData=function(){var e=a.props.currentData;return a.props.tile.properties.dataItems.map(function(t){return e.array.find(function(e){return t.dataItemId===e.dataItemId})})},a.chartInit=function(){var e=a.props.tile,t=e.id,n=e.properties,r=n.color,l=n.title,i=n.max,o=n.min;lt.j.commercialLicense=!0,a.chart=lt.h(t,it.n),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=15,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.data=a.getData();var s=a.chart.xAxes.push(new it.a);s.dataFields.category="alias",s.renderer.grid.template.location=0,s.renderer.labels.template.rotation=315,s.renderer.labels.template.horizontalCenter="right",s.renderer.labels.template.verticalCenter="right",s.renderer.labels.template.paddingBottom=0,s.renderer.minGridDistance=30;var c=a.chart.yAxes.push(new it.m);c.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"},{number:1e6,suffix:"M"},{number:1e9,suffix:"G"}],c.numberFormatter.numberFormat="#,###.##a",""!==i&&""!==o&&(c.max=+i,c.min=+o,c.strictMinMax=!0);var u=a.chart.series.push(new it.d);u.dataFields.valueY="value",u.dataFields.categoryX="alias",u.name="Value",""!==r&&(u.columns.template.stroke=lt.g("#".concat(r)),u.columns.template.fill=lt.g("#".concat(r))),u.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",u.columns.template.fillOpacity=.8;var d=u.columns.template;if(d.strokeWidth=1,d.strokeOpacity=.9,""!==l){var m=a.chart.titles.create();m.text=l,m.marginBottom=5}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit());try{this.chart.data=this.getData(),this.chart.invalidateRawData()}catch(a){console.log(a)}}},{key:"render",value:function(){var e=this.props.tile.id;return l.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(l.a.Component);Pt.defaultProps={};var Bt=Object(s.b)(function(e){return{currentData:e.currentData}})(Pt),Rt={TileType:yt,Gauge:st,BasicGraph:pt,AdvancedGraph:Et,TextBox:ht.a,Map:ft,Table:Tt,CustomTable:Ct.a,CylinderGauge:wt,SolidGauge:jt,IframeTile:Mt,Indicator:Lt,BarGraph:Bt},Nt=function(e){function t(){return Object(T.a)(this,t),Object(I.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(C.a)(t,[{key:"handleEditTile",value:function(e){(0,this.props.toggleModal)(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.tile,n=t.deleteTile,r=t.activeTab,i=t.ui,o=a.properties.type&&Rt[a.properties.type.value]?Rt[a.properties.type.value]:Rt.TileType,s=i.viewOnly?"none":"",c=i.viewOnly?"hidden":"",u=i.viewOnly?"tile-view":"tile-edit";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"tile ".concat(u),style:{height:"100%",width:"100%"}},l.a.createElement("div",{className:"tile-toolbar",style:{visibility:c,position:"absolute",width:"100%",zIndex:99999}},l.a.createElement("span",{className:"tile-remove",style:{float:"right",zIndex:1e3,display:s},title:"Click to delete tile",onClick:function(){return n(a.id,r)}}," ",l.a.createElement(ae.g,{style:{height:"1rem"}})),l.a.createElement("span",{style:{zIndex:1e3,cursor:"pointer",display:s,paddingLeft:"3px"},title:"Click to Edit tile",onClick:function(t){return e.handleEditTile(a)}}," ",l.a.createElement(ae.f,{style:{height:"1rem"},size:"1rem"}))),l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onTouchStart:function(e){return e.stopPropagation()},style:{height:"100%",width:"100%"}},l.a.createElement(o,{tile:a}))))}}]),t}(r.Component);var Ut=Object(s.b)(function(e){return{activeTab:e.activeTab,ui:e.ui}},n)(Nt),Wt=Object(rt.WidthProvider)(rt.Responsive),Ft=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).renderGrids=function(e){var t=a.props,n=t.tiles,r=t.layouts,i=t.activeTab,o=i.index===e.index?"visible":"hidden",s=i.index===e.index?"":0;return l.a.createElement("div",{style:{visibility:o,height:s},key:e.index},l.a.createElement(Wt,{style:{visibility:o,height:s},key:e.index,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:1},cols:{lg:96,md:96,sm:96,xs:24,xxs:1},rowHeight:10,layouts:r[e.index],onLayoutChange:function(t,n){return a.handleLayoutChange(t,n,e)}},n[e.index]&&n[e.index].map(a.renderTile)))},a.renderTile=function(e){var t=a.props.ui.viewOnly?"no-resize":"";return l.a.createElement("div",{key:e.id,"data-grid":e.dataGrid,className:t},l.a.createElement(Ut,{tile:e,toggleModal:a.toggleModal}))},a.handleLayoutChange=function(e,t,n){a.props.saveLayouts(t,n)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{var t=this.props.data.attributes,a=t.object.refreshRate?t.object.refreshRate.attributeValue:1e4;this.interval=setInterval(function(){return e.props.currentData()},a)}catch(n){this.interval=setInterval(function(){return e.props.currentData()},1e4)}}},{key:"render",value:function(){var e=this.props.tabs;return l.a.createElement(l.a.Fragment,null,e&&e.map(this.renderGrids))}}]),t}(r.Component);var Kt=Object(s.b)(function(e){return{activeTab:e.activeTab,layouts:e.layouts,tiles:e.tiles,ui:e.ui,tabs:e.tabs,data:e.data}},n)(Ft),Gt=(a(321),a(192));a(312);lt.l(Gt.a),lt.j.autoSetClassName=!0,lt.j.minPolylineStep=5;var zt=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(I.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark(function e(){var t=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:return e.next=5,Promise.all([this.props.loadDashboard(),this.props.currentData(),this.props.dataItemDefinitions(),this.props.assetData(),this.props.attributes(),this.props.assetDefinitionData()]).then(function(){return t.setState({loading:!1})});case 5:"builder"===P("mode")&&this.props.toggleViewOnly(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),this.setState({loading:"failed"});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loading;return"failed"===e?l.a.createElement(l.a.Fragment,null,l.a.createElement(re,{toggleSidebar:this.toggleSidebar}),l.a.createElement("section",{style:{height:"94vh"}},l.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%)"}},l.a.createElement("h2",null,"Failed to load Dashboard. Please refresh.")))):e?l.a.createElement(l.a.Fragment,null,l.a.createElement(re,{toggleSidebar:this.toggleSidebar}),l.a.createElement("section",{style:{height:"94vh"}},l.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%)"}},l.a.createElement(j.PulseLoader,{sizeUnit:"px",size:20,color:dt.a.fontColor})))):l.a.createElement(l.a.Fragment,null,l.a.createElement(re,{toggleSidebar:this.toggleSidebar}),l.a.createElement(Qe,{className:"sidebar"}),l.a.createElement(nt,null),l.a.createElement(tt,null),l.a.createElement(Kt,{className:"main"}))}}]),t}(r.Component),qt=Object(s.b)(null,n)(zt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=function(e){var t=Object(c.applyMiddleware)(d.a),a=Object(u.composeWithDevTools)(t);return Object(c.createStore)(y,e,a)}();o.a.render(l.a.createElement(s.a,{store:Vt},l.a.createElement(qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},35:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={BASE_URL:"",TOKEN:""}},86:function(e,t,a){e.exports={fontColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)"}}},[[195,6,2]]]);
//# sourceMappingURL=main.042ecec8.chunk.js.map