(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(28),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_redux__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(24),TextBox=function(_Component){function TextBox(){var _getPrototypeOf2,_this;Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,TextBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,(_getPrototypeOf2=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(TextBox)).call.apply(_getPrototypeOf2,[this].concat(args))),_this.substitutions=function(text){var currentData=_this.props.currentData,_this$props$data=_this.props.data,attributes=_this$props$data.attributes,asset=_this$props$data.asset,assetDef=_this$props$data.assetDef;if(!text)return"I am a Text Box";try{return eval("`"+text+"`")}catch(e){return text}},_this}return Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(TextBox,_Component),Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(TextBox,[{key:"render",value:function(){var e=this.props.tile.properties.text;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("section",{style:{width:"100%",height:"100%",position:"relative"}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.substitutions(e)}}))}}]),TextBox}(react__WEBPACK_IMPORTED_MODULE_5__.Component);function mapStateToProps(e){return{data:e.data,currentData:e.currentData}}TextBox.defaultProps={data:void 0},__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__.b)(mapStateToProps)(TextBox)},189:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(28),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(27),D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(29),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),react_redux__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(24),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(45),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),react_icons_fi__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(52),react_spinners__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77),react_spinners__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_spinners__WEBPACK_IMPORTED_MODULE_11__),_util_keys__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(35),primereact_datatable__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(93),primereact_datatable__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(primereact_datatable__WEBPACK_IMPORTED_MODULE_13__),primereact_column__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(81),primereact_column__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(primereact_column__WEBPACK_IMPORTED_MODULE_14__),primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(36),primereact_inputtext__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__),_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(87),_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16__),CustomTable=function(_Component){function CustomTable(){var _getPrototypeOf2,_this;Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,CustomTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__.a)(this,(_getPrototypeOf2=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(CustomTable)).call.apply(_getPrototypeOf2,[this].concat(args))),_this.state={globalFilter:"",data:[],loading:!0},_this.header=react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{textAlign:"left"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("i",{className:"pi pi-search",style:{margin:"4px 4px 0 3rem"}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_inputtext__WEBPACK_IMPORTED_MODULE_15__.InputText,{type:"search",onChange:function(e){e.stopPropagation(),_this.setState({globalFilter:e.target.value})},placeholder:"Search",size:"50"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Refresh Data",onClick:function(e){_this.setState({loading:!0}),_this.fetchData()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_10__.c,{size:"1rem",style:{height:"1rem"}})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Export data as csv",onClick:function(e){_this.export()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_icons_fi__WEBPACK_IMPORTED_MODULE_10__.e,{size:"1rem",style:{height:"1rem"},onClick:_this.export}))),_this.fetchData=Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(){var properties,asset,url;return D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:properties=_this.props.tile.properties,asset=_this.props.data.asset,url=eval("`"+properties.url+"`"),axios__WEBPACK_IMPORTED_MODULE_9___default()({url:url,baseURL:_util_keys__WEBPACK_IMPORTED_MODULE_12__.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:_util_keys__WEBPACK_IMPORTED_MODULE_12__.a.TOKEN}}).then(function(e){_this.setState({data:e.data,loading:!1})}).catch(function(e){console.log(e),_this.setState({loading:!1})});case 4:case"end":return _context.stop()}},_callee,this)})),_this.export=function(){_this.dt.exportCSV()},_this.linkTemplate=function(e,t,a){var r=a(e).replace(/\^/g," ");return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}})},_this.renderTable=function(){var _this$state=_this.state,data=_this$state.data,loading=_this$state.loading;if(loading)return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_spinners__WEBPACK_IMPORTED_MODULE_11__.ScaleLoader,{sizeUnit:"px",size:30,color:_styles_variables_scss__WEBPACK_IMPORTED_MODULE_16___default.a.fontColor}));try{var columns=eval(_this.props.tile.properties.columns.replace(/\s/g,"")),dynamicCols=columns.map(function(e,t){return e.body?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_column__WEBPACK_IMPORTED_MODULE_14__.Column,{key:t,field:e.field,header:e.header,sortable:!0,body:function(t,a){return _this.linkTemplate(t,a,e.body)}}):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_column__WEBPACK_IMPORTED_MODULE_14__.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(primereact_datatable__WEBPACK_IMPORTED_MODULE_13__.DataTable,{ref:function(e){_this.dt=e},value:data,rows:10,paginator:!0,globalFilter:_this.state.globalFilter,header:_this.header},dynamicCols)}catch(err){var type=_this.props.tile.properties.type;return type.default?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},"Custom Table. Columns and/or data source needs to be filled out."):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},"Invalid Input, please try again")}},_this}return Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(CustomTable,_Component),Object(D_LimeDev_Webpages_react_apps_dashboard_with_redux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(CustomTable,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&this.fetchData()}},{key:"render",value:function(){var e=this.renderTable();return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"table-background",style:{height:"100%",width:"100%"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()}},e)))}}]),CustomTable}(react__WEBPACK_IMPORTED_MODULE_7__.Component);function mapStateToProps(e){return{data:e.data}}__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_8__.b)(mapStateToProps)(CustomTable)},195:function(e,t,a){e.exports=a(320)},312:function(e,t,a){e.exports={fontColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)"}},320:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"saveDashboard",function(){return N}),a.d(r,"loadDashboard",function(){return U}),a.d(r,"currentData",function(){return W}),a.d(r,"dataItemDefinitions",function(){return F}),a.d(r,"attributes",function(){return G}),a.d(r,"assetData",function(){return K}),a.d(r,"assetDefinitionData",function(){return z}),a.d(r,"toggleViewOnly",function(){return V}),a.d(r,"toggleSidebar",function(){return q}),a.d(r,"toggleModal",function(){return H}),a.d(r,"resetModal",function(){return X}),a.d(r,"addTile",function(){return Y}),a.d(r,"deleteTile",function(){return J}),a.d(r,"editTile",function(){return $}),a.d(r,"saveLayouts",function(){return Q}),a.d(r,"addTab",function(){return Z}),a.d(r,"editTab",function(){return ee}),a.d(r,"deleteTab",function(){return te}),a.d(r,"changeTab",function(){return ae});var n=a(2),i=a.n(n),l=a(82),o=a.n(l),s=a(24),c=a(97),d=a(179),u=a(180),p=a(68),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILE":var a=t.activeTab,r=t.id,n=t.tile,i=e,l=Object(p.a)(e[a.index]).concat([{id:r,properties:n.properties,dataGrid:n.dataGrid}]);return i.splice(a.index,1,l),Object(p.a)(i);case"DELETE_TILE":var o=t.activeTab,s=t.id,c=e[o.index].filter(function(e){return e.id!==s}),d=e.slice(0);return d.splice(o.index,1,c),Object(p.a)(d);case"EDIT_TILE":var u=t.index,m=t.newTile,h=e[u].filter(function(e){return e.id!==m.id});h.push(m);var _=e.slice(0);return _.splice(u,1,h),Object(p.a)(_);case"ADD_TAB":return Object(p.a)(e).concat([[]]);case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index});case"LOAD_DASHBOARD":return t.payload.data.tiles?t.payload.data.tiles:e;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_LAYOUT":var a=t.layouts,r=t.tab,n=e.slice(0);return n.splice(r.index,1,a),n;case"ADD_TAB":return Object(p.a)(e).concat([{}]);case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index});case"SAVE_DASHBOARD":return e;case"LOAD_DASHBOARD":return t.payload.data.layouts?t.payload.data.layouts:e;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"default",index:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TAB":return t.tab?t.tab:e;default:return e}},b=a(37),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{name:"default",index:0}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAB":return Object(p.a)(e).concat([t.tab]);case"EDIT_TAB":return e.map(function(e){return e.id===t.tab.id?Object(b.a)({},e,{name:t.name}):e});case"DELETE_TAB":return e.filter(function(e,a){return a!==t.index}).map(function(e,a){return e.index>t.index?{name:e.name,index:e.index-1}:e});case"LOAD_DASHBOARD":return t.payload.data.tabs?t.payload.data.tabs:e;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebar:!1,modal:{visible:!1,tile:null},viewOnly:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIDEBAR":var a=!e.sidebar;return Object(b.a)({},e,{sidebar:a});case"TOGGLE_MODAL":return Object(b.a)({},e,{modal:{visible:!0,tile:t.tile}});case"RESET_MODAL":return Object(b.a)({},e,{modal:{visible:!1,tile:null}});case"EDIT_TILE":return Object(b.a)({},e,{modal:Object(b.a)({},e.modal,{tile:t.tile})});case"TOGGLE_VIEWONLY":return Object(b.a)({},e,{viewOnly:!e.viewOnly});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATAITEM_DEFINITIONS":var a=t.payload,r=a.reduce(function(e,t){return e[t.dataItemId]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{dataItemDefinitions:{array:a,object:r}});case"ATTRIBUTES_DATA":if(200===t.payload.status){var n=t.payload.data,i=n.reduce(function(e,t){return e[t.attributeName]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{attributes:{array:n,object:i}})}return console.log(t.payload),Object(b.a)({},e,{attributes:{array:[],object:{}}});case"ASSET_DATA":return 200===t.payload.status?Object(b.a)({},e,{asset:t.payload.data}):(console.log(t.payload),Object(b.a)({},e,{asset:null}));case"ASSET_DEFINITION_DATA":return 200===t.payload.status?Object(b.a)({},e,{assetDef:t.payload.data}):(console.log(t.payload),Object(b.a)({},e,{assetDef:null}));default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_DATA":if(200===t.payload.status){var a=t.payload.data,r=a.reduce(function(e,t){return e[t.dataItemId]=Object(b.a)({},t),e},{});return Object(b.a)({},e,{array:a,object:r})}return console.log(t.payload),Object(b.a)({},e,{array:[],object:{}});default:return e}},E=Object(c.combineReducers)({activeTab:_,tabs:f,tiles:m,layouts:h,ui:v,currentData:y,data:g});var x=a(34),D=a.n(x),O=a(44),w=a(25),C=a(26),T=a(28),I=a(27),k=a(29),A=a(77),j=a(45),M=a.n(j),L=a(35),S=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},P=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},B=function(){var e=Object(O.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.location.href.toLowerCase().match("login")){e.next=15;break}return sessionStorage.destination=window.location.href,(t=P("authJWT"))&&(document.cookie="authJWT=".concat(t)),e.prev=4,e.next=7,M()({url:"/api/Auth/Status",baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json"}});case 7:a=e.sent,"valid"===a.data.login?sessionStorage.destination=window.location.href:window.location.href="/login",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),window.location.href="/login";case 15:case"end":return e.stop()}},e,this,[[4,12]])}));return function(){return e.apply(this,arguments)}}(),R='{"tiles":[[{"id":"14125d10-5495-bb90-35b4-62a7d65e40c0","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"392f6da2-4115-e0ca-8304-efce2005bac1","properties":{"type":{"name":"Basic Graph","value":"BasicGraph","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"601699c3-bd59-ff9e-cc73-4d2b009d4c86","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"bfc6f9bc-5420-c72c-21cd-f63141790d5e","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"ad508e28-1d55-5279-20d8-f194229e25a1","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"2e4a9b21-246e-c156-5892-dfe617facef1","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"f8e6aefd-2558-2875-eb3c-44c6e20b9497","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"59c20246-1052-2aef-da90-8a34e4c13c4f","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"2cbdb21d-ef95-7d09-793c-58827e859d8d","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"b72557d7-9a02-a480-138a-33744d5271d8","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"e028dedf-ae1b-01a8-4dac-2ed9168fb238","properties":{"type":{"name":"Dial Gauge","value":"Gauge","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"b09db61d-915e-ea5d-9c82-ba755a30ce78","properties":{"type":{"name":"Dial Gauge","value":"Gauge","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"a6274047-543b-8f68-dd5d-169fe1216e00","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"4696441f-5fc4-8735-cce1-18d9feb88102","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"85e74de0-6df7-f651-73c0-d7cb4d01b3c9","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"c95cd311-4f9d-81ef-44ca-c2b48266c299","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"afad3a8d-ed0f-2d89-1098-6fab337abd39","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"69ccf259-dce8-7789-6b30-a7b1f5fc4826","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"97e07926-be1f-1295-86c2-0c6090e4957c","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"5499effa-34f6-d148-9bca-b33a24d1d76c","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"8545d044-3344-17f4-ef5a-5818dbeeab31","properties":{"type":{"name":"Indicator","value":"Indicator","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"fb38ea23-aeb7-a748-85a0-064c4265cc8a","properties":{"type":{"name":"Advanced Graph","value":"AdvancedGraph","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"7e103e80-db63-82b1-d743-effb9a240fc6","properties":{"type":{"name":"Dial Gauge","value":"Gauge","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}},{"id":"c7d87914-a470-3eb0-a2dc-5f7a2418d151","properties":{"type":{"name":"Dial Gauge","value":"Gauge","default":true}},"dataGrid":{"x":999,"y":0,"w":20,"h":10}}]],"layouts":[{"lg":[{"w":10,"h":3,"x":0,"y":0,"i":"14125d10-5495-bb90-35b4-62a7d65e40c0","moved":false,"static":false},{"w":64,"h":24,"x":32,"y":25,"i":"392f6da2-4115-e0ca-8304-efce2005bac1","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":0,"i":"601699c3-bd59-ff9e-cc73-4d2b009d4c86","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":0,"i":"bfc6f9bc-5420-c72c-21cd-f63141790d5e","moved":false,"static":false},{"w":10,"h":3,"x":0,"y":6,"i":"ad508e28-1d55-5279-20d8-f194229e25a1","moved":false,"static":false},{"w":10,"h":3,"x":0,"y":9,"i":"2e4a9b21-246e-c156-5892-dfe617facef1","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":6,"i":"f8e6aefd-2558-2875-eb3c-44c6e20b9497","moved":false,"static":false},{"w":10,"h":3,"x":0,"y":3,"i":"59c20246-1052-2aef-da90-8a34e4c13c4f","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":3,"i":"2cbdb21d-ef95-7d09-793c-58827e859d8d","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":9,"i":"b72557d7-9a02-a480-138a-33744d5271d8","moved":false,"static":false},{"w":15,"h":12,"x":0,"y":18,"i":"e028dedf-ae1b-01a8-4dac-2ed9168fb238","moved":false,"static":false},{"w":15,"h":12,"x":15,"y":18,"i":"b09db61d-915e-ea5d-9c82-ba755a30ce78","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":9,"i":"a6274047-543b-8f68-dd5d-169fe1216e00","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":3,"i":"4696441f-5fc4-8735-cce1-18d9feb88102","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":6,"i":"85e74de0-6df7-f651-73c0-d7cb4d01b3c9","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":12,"i":"c95cd311-4f9d-81ef-44ca-c2b48266c299","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":12,"i":"afad3a8d-ed0f-2d89-1098-6fab337abd39","moved":false,"static":false},{"w":10,"h":3,"x":0,"y":12,"i":"69ccf259-dce8-7789-6b30-a7b1f5fc4826","moved":false,"static":false},{"w":10,"h":3,"x":20,"y":15,"i":"97e07926-be1f-1295-86c2-0c6090e4957c","moved":false,"static":false},{"w":10,"h":3,"x":10,"y":15,"i":"5499effa-34f6-d148-9bca-b33a24d1d76c","moved":false,"static":false},{"w":10,"h":3,"x":0,"y":15,"i":"8545d044-3344-17f4-ef5a-5818dbeeab31","moved":false,"static":false},{"w":64,"h":25,"x":32,"y":0,"i":"fb38ea23-aeb7-a748-85a0-064c4265cc8a","moved":false,"static":false},{"w":15,"h":12,"x":15,"y":30,"i":"7e103e80-db63-82b1-d743-effb9a240fc6","moved":false,"static":false},{"w":15,"h":12,"x":0,"y":30,"i":"c7d87914-a470-3eb0-a2dc-5f7a2418d151","moved":false,"static":false}]}],"tabs":[{"name":"default","index":0}]}',N=function(e,t,a){return function(){var r=Object(O.a)(D.a.mark(function r(n){var i,l,o;return D.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=P("dashboardId"),l="/api/dashboards/".concat(i),r.next=4,M()({url:l,baseURL:L.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN},data:JSON.stringify({tiles:e,layouts:t,tabs:a})});case 4:o=r.sent,n({type:"SAVE_DASHBOARD",payload:o.data});case 6:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},U=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n,i,l,o,s,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=P("dashboardId"),r=P("assetDefinitionId"),n=P("assetId"),a){e.next=19;break}return e.next=6,M()({url:"/api/assetDefinitions/".concat(r,"/Dashboards"),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}});case 6:if(0===(i=e.sent).data.length){e.next=11;break}a=i.data[0].dashboardId,e.next=17;break;case 11:return l={dashboardId:0,dashboardName:"assetdef16dashboard",systemDefinitionId:null,assetDefinitionId:r,config:R},e.next=14,M()({url:"/api/dashboards",baseURL:L.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN},data:JSON.stringify(l)});case 14:o=e.sent,a=o[0].dashboardId,alert("No dashboard for this asset was found, creating a new one");case 17:s=window.location.protocol+"//"+window.location.host+window.location.pathname+"?dashboardId=".concat(a,"&assetDefinitionId=").concat(r,"&assetId=").concat(n),window.history.pushState({path:s},"",s);case 19:return e.next=21,M()({url:"/api/dashboards/".concat(a),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}});case 21:""!==(c=e.sent).data&&" "!==c.data||(c.data=JSON.parse(R)),t({type:"LOAD_DASHBOARD",payload:c});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),r="/api/Assets/".concat(a,"/currentDataItems"),e.next=4,M()({url:r,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 4:n=e.sent,t({type:"CURRENT_DATA",payload:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n,i,l,o,s,c,d;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),r=P("assetDefinitionId"),n="/api/assetDefinitions/".concat(r,"/dataItemDefinitions"),e.next=5,M()({url:n,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 5:return i=e.sent,l="/api/Assets/".concat(a,"/currentDataItems"),e.next=9,M()({url:l,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 9:return o=e.sent,e.next=12,Promise.all([i,o]);case 12:s=i.data,c=o.data,d=s.map(function(e){var t=c.find(function(t){return t.dataItemId===e.dataItemId}),a=t?t.alias:e.label;return Object(b.a)({},e,{label:a})}),t({type:"DATAITEM_DEFINITIONS",payload:d});case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},G=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),r="/api/assets/".concat(a,"/attributes"),e.next=4,M()({url:r,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 4:n=e.sent,t({type:"ATTRIBUTES_DATA",payload:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},K=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetId"),r="/api/assets/".concat(a),e.next=4,M()({url:r,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 4:n=e.sent,t({type:"ASSET_DATA",payload:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},z=function(){return function(){var e=Object(O.a)(D.a.mark(function e(t){var a,r,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=P("assetDefinitionId"),r="/api/assetdefinitions/".concat(a),e.next=4,M()({url:r,baseURL:L.a.BASE_URL,method:"GET",headers:{Authorization:L.a.TOKEN,"Content-Type":"application/json"}});case 4:n=e.sent,t({type:"ASSET_DEFINITION_DATA",payload:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},V=function(){return{type:"TOGGLE_VIEWONLY"}},q=function(){return{type:"TOGGLE_SIDEBAR"}},H=function(e){return{type:"TOGGLE_MODAL",tile:e}},X=function(){return{type:"RESET_MODAL"}},Y=function(e,t){var a={dataGrid:{x:999,y:0,w:20,h:10},properties:e};return{type:"ADD_TILE",id:S(),tile:a,activeTab:t}},J=function(e,t){return{type:"DELETE_TILE",id:e,activeTab:t}},$=function(e,t){return{type:"EDIT_TILE",newTile:e,index:t}},Q=function(e,t){return{type:"SAVE_LAYOUT",layouts:e,tab:t}},Z=function(e){return{type:"ADD_TAB",tab:e}},ee=function(e,t){return{type:"EDIT_TAB",tab:e,name:t}},te=function(e){return{type:"DELETE_TAB",index:e}},ae=function(e){return{type:"CHANGE_TAB",tab:e}},re=a(52),ne=a(78);var ie=Object(s.b)(function(e){return{ui:e.ui,data:e.data}},r)(function(e){var t=e.toggleSidebar,a=e.toggleViewOnly,r=e.ui,n=e.data,l=n.asset,o=n.assetDef,s=r.viewOnly?"hidden":"",c=window.innerWidth>600?"block":"none",d=l&&o?"builder"===P("mode")?o.assetDefinitionName:l.assetAlias:"";return i.a.createElement("nav",{className:"navbar"},i.a.createElement("div",{className:"navbar-menu navbar-section",onClick:t,style:{cursor:"pointer",visibility:s}},i.a.createElement(re.a,{style:{height:"1.75rem"},className:"navbar-menu-icon",size:"1.75rem"})),i.a.createElement("div",{className:"navbar-section"},i.a.createElement(ne.Checkbox,{style:{marginTop:".2rem",marginLeft:"1.5rem",borderRadius:"4px",backgroundColor:"#444 "},title:"Click to toggle",className:"",name:"viewOnly",checked:r.viewOnly,onChange:a}),i.a.createElement("label",{style:{color:"white",fontSize:".75rem",marginLeft:".5rem"},title:"Click checkbox to toggle",htmlFor:"viewOnly",className:"p-checkbox-label navbar-checkbox-label"},"View only mode")),i.a.createElement("h1",{style:{margin:0,marginLeft:"1rem"},className:"navbar-asset"},"".concat(d)),i.a.createElement("h1",{style:{display:c},className:"navbar-brand navbar-section"},"Lime Cloud"),i.a.createElement("div",{className:"navbar-section",style:{marginLeft:"auto",display:c}},i.a.createElement("ul",{style:{listStyle:"none",margin:0}},i.a.createElement("li",{className:"navbar-navitem"},i.a.createElement("a",{href:"../assets/list.shtml"},"Assets")),i.a.createElement("li",{className:"navbar-navitem"},i.a.createElement("a",{href:"../assetdefinitions/index.shtml"},"Asset Definitions")))))}),le=a(42),oe=a(182),se=a(65),ce=a(60),de=a(36),ue=a(146),pe=function(e){var t=e.handleChange,a=e.color,r=e.label,n=e.name;return i.a.createElement("div",{className:"color-picker"},i.a.createElement("span",{className:"color-picker-label"},r),i.a.createElement(ue.ColorPicker,{value:a,name:n,onChange:t,defaultColor:"000000"}),i.a.createElement(de.InputText,{style:{border:"none",borderBottom:"1px solid #585858",width:"30%",backgroundColor:"inherit"},onChange:t,value:a,type:"text",name:n,className:"color-picker-color"}))};pe.defaultProps={color:"000000",label:"",name:"",handleChange:function(){}};var me=pe,he=a(17),_e=new he.a,be=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItem:null,name:"",min:"",max:"",unit:"",band1:_e.getIndex(0).hex.substring(1),band2:_e.getIndex(2).hex.substring(1),band3:_e.getIndex(4).hex.substring(1),band1End:"",band2End:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e&&!e.properties.type.default){var t=e.properties,a=t.dataItem,r=t.name,n=t.min,i=t.max,l=t.unit,o=t.band1,s=t.band1End,c=t.band2,d=t.band2End,u=t.band3;this.setState({dataItem:a,name:r,min:n,max:i,unit:l,band1:o,band1End:s,band2:c,band2End:d,band3:u})}}},{key:"render",value:function(){var e=this.state,t=(e.name,e.dataItem),a=e.min,r=e.max,n=e.unit,l=e.band1,o=e.band1End,s=e.band2,c=e.band2End,d=e.band3;return i.a.createElement("div",{className:"component-form"},i.a.createElement(ce.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:t,onChange:this.handleChange,options:this.dataItems,placeholder:"Select a data item",filter:!0,filterBy:"label",required:!0}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:n,type:"text",onChange:this.handleChange,name:"unit"}),i.a.createElement("label",{htmlFor:"unit"},"Unit")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:a,type:"number",onChange:this.handleChange,name:"min",required:!0}),i.a.createElement("label",{htmlFor:"min"},"Min*")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:r,type:"number",onChange:this.handleChange,name:"max",required:!0}),i.a.createElement("label",{htmlFor:"max"},"Max*")),i.a.createElement(me,{color:l,handleChange:this.handleChange,label:"Band 1:",name:"band1"}),i.a.createElement("div",{className:"dialgauge-band-lengths"},i.a.createElement("span",{className:""},""===a?"min to ":"".concat(a," to ")),i.a.createElement(de.InputText,{value:o,style:{width:"50%"},type:"number",onChange:this.handleChange,name:"band1End",placeholder:"Band 1 End*"})),i.a.createElement(me,{color:s,handleChange:this.handleChange,label:"Band 2:",name:"band2"}),i.a.createElement("div",{className:"dialgauge-band-lengths"},i.a.createElement("span",{className:""},""===o?"Band 1 End to ":"".concat(o," to ")),i.a.createElement(de.InputText,{value:c,style:{width:"50%"},type:"number",onChange:this.handleChange,name:"band2End",placeholder:"Band 2 End*"})),i.a.createElement(me,{color:d,handleChange:this.handleChange,label:"Band 3:",name:"band3"}),i.a.createElement("div",{className:"dialgauge-band-lengths"},i.a.createElement("span",{className:""},""===c?"Band 2 End to ":"".concat(c," to ")),i.a.createElement("span",{className:""}," ",""===r?"max":r," ")))}}]),t}(n.Component);var fe=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(be),ve=a(116),ge=a(150),ye=(a(168),[{label:"5 minutes ago",value:"five"},{label:"10 minutes ago",value:"ten"},{label:"half hour ago",value:"halfhour"},{label:"1 hour ago",value:"hour"}]),Ee=[{label:"Live",value:"live"},{label:"Fixed",value:"fixed"}],xe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItems:null,title:"",yaxis:"",liveStart:"",fixedStart:"",timeType:"live",legend:!0},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a.renderTimeSelection=function(){var e=a.state,t=e.timeType,r=e.liveStart,n=e.fixedStart;e.end;return"live"===t?i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.Dropdown,{style:{width:"100%"},name:"liveStart",value:r,onChange:a.handleChange,options:ye,placeholder:"Select a start time"})):"fixed"===t?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{className:"input",type:"number",min:"0",max:"168",value:n,name:"fixedStart",onChange:a.handleChange}),i.a.createElement("label",{htmlFor:"fixedStart"},"Hours Ago"))):i.a.createElement("div",null,"Something went wrong")},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e&&!e.properties.type.default){var t=e.properties,a=t.title,r=t.yaxis,n=t.dataItems,i=t.liveStart,l=t.fixedStart,o=t.timeType,s=t.legend;this.setState({title:a,yaxis:r,liveStart:i,fixedStart:l,timeType:o,legend:s,dataItems:this.dataItems.filter(function(e){return n.find(function(t){return t.dataItemId===e.dataItemId})})})}}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.yaxis,r=e.dataItems,n=e.legend,l=e.timeType,o=this.renderTimeSelection();return i.a.createElement("section",{className:"component-form"},i.a.createElement("label",null,"Time Type: "),i.a.createElement(ge.SelectButton,{value:l,name:"timeType",options:Ee,onChange:this.handleChange}),o,i.a.createElement(ve.MultiSelect,{style:{maxHeight:"500px"},name:"dataItems",value:r,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,scrollHeight:"300px"}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{className:"input",value:t,type:"text",onChange:this.handleChange,name:"title"}),i.a.createElement("label",{htmlFor:"title"},"Title")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{className:"input",value:a,type:"text",onChange:this.handleChange,name:"yaxis"}),i.a.createElement("label",{htmlFor:"yaxis"},"Y-Axis Label")),i.a.createElement(ne.Checkbox,{checked:n,onChange:this.handleChange,name:"legend"}),i.a.createElement("label",{htmlFor:"legend",className:"p-checkbox-label"},"Display Legend"))}}]),t}(n.Component);var De=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(xe),Oe=a(184),we=a(185),Ce=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={text:a.props.ui.modal.tile?a.props.ui.modal.tile.properties.text:"",items:[]},a.handleChange=function(e){var t=a.props.addData;a.setState({text:e.htmlValue},function(){t({text:a.state.text})})},a.addText=function(e){var t=a.state.text;a.setState({text:t+e})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentData,a=this.props.data.attributes;this.setState({items:[{label:"Data Items",items:t.array.map(function(t){return{label:t.alias,items:[{label:"Alias",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].alias}"))}},{label:"Value",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].value}"))}},{label:"Timestamp",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].timestamp}"))}},{label:"Unit",command:function(){e.addText("${currentData.object['".concat(t.dataItemId,"'].unit}"))}}]}})},{label:"Attributes",items:a.array.map(function(t){return{label:t.attributeName,items:[{label:"Name",command:function(){e.addText("${attributes.object['".concat(t.attributeName,"'].attributeName}"))}},{label:"Value",command:function(){e.addText("${attributes.object['".concat(t.attributeName,"'].attributeValue}"))}}]}})}]})}},{key:"render",value:function(){var e=this.state.text;return i.a.createElement("section",{className:"component-form"},i.a.createElement(Oe.Editor,{style:{display:"inline-block",height:"300px",width:"inherit"},name:"text",value:e,onTextChange:this.handleChange,placeholder:"Your text here"}),i.a.createElement("div",{style:{overflow:"scroll",maxHeight:"200px"}},i.a.createElement(we.PanelMenu,{model:this.state.items,style:{overflow:"scroll"}})))}}]),t}(n.Component);var Te=Object(s.b)(function(e){return{ui:e.ui,data:e.data,currentData:e.currentData}})(Ce),Ie=a(96),ke=a.n(Ie),Ae=new he.a,je=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={axes:[{label:"yaxis0",min:"",max:""}],series:[{dataItem:null,axis:null,color:Ae.getIndex(0).hex.substring(1)}]},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e,t,r){if("axis"===r){var n=Object(p.a)(a.state.axes);n[t][e.target.name]=e.target.value,a.setState({axes:n})}else if("series"===r){var i=Object(p.a)(a.state.series);i[t][e.target.name]=e.target.value,a.setState({series:i})}},a.addAxis=function(e){e.preventDefault();var t=a.state.axes.length;a.setState(function(e){return{axes:Object(p.a)(e.axes).concat([{label:"yaxis".concat(t),min:"",max:""}])}})},a.addSeries=function(e){e.preventDefault(),a.setState(function(e){return{series:Object(p.a)(e.series).concat([{dataItem:"",axis:"",color:Ae.getIndex(e.series.length).hex.substring(1)}])}})},a.renderSeries=function(e,t){var r=a.state,n=r.series,l=r.axes;return i.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"1rem"}},i.a.createElement(ce.Dropdown,{name:"dataItem",className:"multiaxis-form-field",style:{width:"30%",marginLeft:"0"},options:a.dataItems,optionLabel:"label",value:n[t].dataItem,onChange:function(e){return a.handleChange(e,t,"series")},filter:!0,filterBy:"label",placeholder:"Choose data item",required:!0}),i.a.createElement(ce.Dropdown,{name:"axis",className:"multiaxis-form-field",style:{width:"30%"},options:l,optionLabel:"label",value:n[t].axis,onChange:function(e){return a.handleChange(e,t,"series")},filter:!0,placeholder:"Choose Y-Axis",required:!0}),i.a.createElement(ue.ColorPicker,{name:"color",className:"multiaxis-form-field",style:{width:"10%"},value:n[t].color,onChange:function(e){return a.handleChange(e,t,"series")},defaultColor:"000000"}),i.a.createElement("span",{className:"multiaxis-form-field",style:{width:"10%",textAlign:"center",verticalAlign:"middle"}},i.a.createElement(re.g,{size:"1.5rem",onClick:function(e){return a.handleDelete(e,t,"series")},style:{cursor:"pointer"}})))},a.renderAxes=function(e,t){var r=a.state.axes;return i.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"1rem"}},i.a.createElement(de.InputText,{style:{width:"30%",marginLeft:"0"},className:"multiaxis-form-field",type:"text",value:r[t].label,onChange:function(e){return a.handleChange(e,t,"axis")},name:"label"}),i.a.createElement(de.InputText,{className:"multiaxis-form-field",name:"min",style:{width:"20%"},value:r[t].min,onChange:function(e){return a.handleChange(e,t,"axis")},placeholder:"min",type:"number"}),i.a.createElement(de.InputText,{className:"multiaxis-form-field",name:"max",style:{width:"20%"},value:r[t].max,onChange:function(e){return a.handleChange(e,t,"axis")},placeholder:"max",type:"number"}),i.a.createElement("span",{className:"multiaxis-form-field",style:{width:"10%",textAlign:"center",verticalAlign:"middle"}},i.a.createElement(re.g,{size:"1.5rem",onClick:function(e){return a.handleDelete(e,t,"axis")},style:{cursor:"pointer"}})))},a.handleDelete=function(e,t,r){var n=a.state,i=n.axes,l=n.series;"axis"===r?a.setState({axes:i.filter(function(e,a){return a!==t})}):"series"===r&&a.setState({series:l.filter(function(e,a){return a!==t})})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.ui.modal.tile;if(t&&!t.properties.type.default){var a=t.properties,r=a.axes,n=a.series,i=n.map(function(t){var a=e.dataItems.find(function(e){return e.dataItemId===t.dataItem.dataItemId});return Object(b.a)({},t,{dataItem:a})});0!==n.length&&this.setState({series:i}),0!==r.length&&this.setState({axes:r})}}},{key:"render",value:function(){var e=this.state,t=e.axes,a=e.series,r=this.props,n=r.submitModal,l=r.closeModal;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{height:"600px",overflow:"scroll"}},i.a.createElement("div",{style:{marginBottom:"1rem"}},i.a.createElement("div",{style:{marginBottom:"1rem"}},i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%",marginLeft:"0"}},"Label"),i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"20%"}},"Minimum"),i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"20%"}},"Maximum"),i.a.createElement("span",{className:"multiaxis-form-header"},"Delete")),t.map(this.renderAxes),i.a.createElement(se.Button,{label:"Add Axis",onClick:this.addAxis,style:{marginRight:"1rem"}}),i.a.createElement("span",null,"Note: If no min/max is specified the axis will autoscale.")),i.a.createElement("div",null,i.a.createElement("div",{style:{marginBottom:"1rem"}},i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%",marginLeft:"0"}},"Data Item"),i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"30%"}},"Y Axis"),i.a.createElement("span",{className:"multiaxis-form-header",style:{width:"10%"}},"Color"),i.a.createElement("span",{className:"multiaxis-form-header"},"Delete")),a.map(this.renderSeries),i.a.createElement(se.Button,{style:{marginRight:"1rem"},label:"Add Series",onClick:this.addSeries}),i.a.createElement("span",null,"Note: Color will default if none specifically selected.")),i.a.createElement("div",{style:{position:"fixed",bottom:0,right:0,width:"100%"}},i.a.createElement("div",{style:{float:"right",marginRight:"1rem"}},i.a.createElement(se.Button,{label:"Submit",icon:"pi pi-check",onClick:function(e){return n(e,t,a)}}),i.a.createElement(se.Button,{label:"Close",icon:"pi pi-times",onClick:l,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}})))))}}]),t}(n.Component);var Me=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(je),Le=[{label:"5 minutes ago",value:"five"},{label:"10 minutes ago",value:"ten"},{label:"half hour ago",value:"halfhour"},{label:"1 hour ago",value:"hour"}],Se=[{label:"Live",value:"live"},{label:"Fixed",value:"fixed"}],Pe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={series:[],title:"",axes:[],liveStart:"",fixedStart:"",timeType:"live",legend:!0,visible:!1},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a.openModal=function(e){e.stopPropagation(),e.preventDefault(),a.setState({visible:!0})},a.closeModal=function(e){e.stopPropagation(),e.preventDefault(),a.setState({visible:!1})},a.submitModal=function(e,t,r){e.preventDefault();var n=a.props.addData;a.setState({axes:t,series:r,visible:!1},function(){n(a.state)})},a.renderTimeSelection=function(){var e=a.state,t=e.timeType,r=e.liveStart,n=e.fixedStart;e.end;return"live"===t?i.a.createElement(ce.Dropdown,{style:{width:"100%"},name:"liveStart",value:r,onChange:a.handleChange,options:Le,placeholder:"Select a start time",required:!0}):"fixed"===t?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{className:"input",type:"number",min:"0",max:"168",value:n,name:"fixedStart",onChange:a.handleChange}),i.a.createElement("label",{htmlFor:"fixedStart"},"Hours Ago"))):i.a.createElement("div",null,"Something went wrong")},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e&&!e.properties.type.default){var t=e.properties,a=t.title,r=t.axes,n=t.series,i=t.liveStart,l=t.fixedStart,o=t.timeType,s=t.legend;this.setState({title:a,axes:r,series:n,liveStart:i,fixedStart:l,timeType:o,legend:s})}}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.timeType,r=e.legend,n=e.series,l=e.axes,o=this.renderTimeSelection(),s="".concat(this.state.visible?"modal-show":"modal-hide");return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:"component-form"},i.a.createElement("label",null,"Time Type: "),i.a.createElement(ge.SelectButton,{value:a,name:"timeType",options:Se,onChange:this.handleChange}),o,i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{className:"input",value:t,type:"text",onChange:this.handleChange,name:"title"}),i.a.createElement("label",{htmlFor:"title"},"Title")),i.a.createElement("div",null,i.a.createElement(ne.Checkbox,{checked:r,onChange:this.handleChange,name:"legend"}),i.a.createElement("label",{htmlFor:"legend",className:"p-checkbox-label"},"Display Legend")),i.a.createElement(se.Button,{style:{marginBottom:"1rem"},onClick:this.openModal,label:"Graph Config"})),i.a.createElement("div",{className:"background ".concat(s)},i.a.createElement(ke.a,{handle:"div.tab-modal-header"},i.a.createElement("div",null,i.a.createElement("section",{className:"tab-modal ",style:{transform:"translate(0,0)",left:0,top:0,width:"600px"}},i.a.createElement("div",{className:"tab-modal-header",style:{cursor:"move"}},i.a.createElement("h1",null,"Axis and Plot Config")),i.a.createElement("div",{className:"modal-main"},i.a.createElement(Me,{submitModal:this.submitModal,closeModal:this.closeModal,series:n,axes:l})))))))}}]),t}(n.Component);var Be=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Pe),Re=[{label:"DataItems",value:"dataItems"},{label:"Files",value:"files"},{label:"Alarms",value:"alarms"},{label:"Events",value:"events"}],Ne=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={option:"",search:"",showHeader:!0},a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.option,r=t.search;this.setState({option:a,search:r})}}},{key:"render",value:function(){var e=this.state,t=e.option,a=e.search,r=e.showHeader;return i.a.createElement("section",{className:"component-form"},i.a.createElement(ce.Dropdown,{style:{width:"100%"},name:"option",value:t,options:Re,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose Table Type",required:!0}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:a,type:"text",onChange:this.handleChange,name:"search"}),i.a.createElement("label",{htmlFor:"search"},"Search")),i.a.createElement(ne.Checkbox,{checked:r,onChange:this.handleChange,name:"showHeader"}),i.a.createElement("label",{htmlFor:"showHeader",className:"p-checkbox-label"},"Display Header"))}}]),t}(n.Component);var Ue=Object(s.b)(function(e){return{ui:e.ui}})(Ne),We=a(186),Fe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={url:"",columns:""},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.value?e.target.value:e.target.checked;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.url,r=t.columns;this.setState({url:a,columns:r})}}},{key:"render",value:function(){return i.a.createElement("section",{className:"component-form"},i.a.createElement(de.InputText,{value:this.state.url,onChange:this.handleChange,placeholder:"Data Source eg. /api/...",name:"url"}),i.a.createElement(We.InputTextarea,{rows:15,columns:50,value:this.state.columns,onChange:this.handleChange,placeholder:'Columns: must be in the following format exactly, [{"header": "", "field":""}, {...}, etc].\r To make custom cells, add a "body" field to the column object. The field value must be a function that takes a data arguemnt and returns a string of valid html. Opening tags must also have a "^" after the tag name. Example, "body": () => {return "<a^ href="mylink.com" >data.field</a> (data)',name:"columns"}))}}]),t}(n.Component);var Ge=Object(s.b)(function(e){return{ui:e.ui}})(Fe),Ke=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={showAll:!1},a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties.showAll;this.setState({showAll:t})}}},{key:"render",value:function(){var e=this.state.showAll;return i.a.createElement("section",{className:"component-form"},i.a.createElement(ne.Checkbox,{checked:e,onChange:this.handleChange,name:"showAll"}),i.a.createElement("label",{htmlFor:"showAll",className:"p-checkbox-label"},"Show All Assets"))}}]),t}(n.Component);var ze=Object(s.b)(function(e){return{ui:e.ui}})(Ke),Ve=new he.a,qe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItem:null,min:"",max:"",unit:"",name:"",fillColor:Ve.getIndex(0).hex.substring(1)},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e&&!e.properties.type.default){var t=e.properties,a=t.dataItem,r=t.name,n=t.max,i=t.unit,l=t.color;this.setState({dataItem:a,name:r,max:n,unit:i,color:l})}}},{key:"render",value:function(){var e=this.state,t=e.dataItem,a=e.max,r=e.unit,n=e.color,l=e.name;return i.a.createElement("div",{className:"component-form"},i.a.createElement(ce.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:t,onChange:this.handleChange,options:this.dataItems,placeholder:"Select a data item",filter:!0,filterBy:"label",required:!0}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:l,type:"text",onChange:this.handleChange,name:"name"}),i.a.createElement("label",{htmlFor:"name"},"Name")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:a,type:"number",onChange:this.handleChange,name:"max",required:!0}),i.a.createElement("label",{htmlFor:"max"},"Max*")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:r,type:"text",onChange:this.handleChange,name:"unit"}),i.a.createElement("label",{htmlFor:"unit"},"Unit")),i.a.createElement(me,{color:n,handleChange:this.handleChange,label:"Fill Color:",name:"color"}),i.a.createElement("p",{style:{fontSize:"12px",marginTop:0}},"Fill color will default if not specifically selected"))}}]),t}(n.Component);var He=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(qe),Xe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItems:[],max:"",unit:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItems,r=t.max;this.setState({dataItems:a,max:r})}}},{key:"render",value:function(){var e=this.state,t=e.dataItems,a=e.max,r=e.unit;return console.log(this.dataItems),i.a.createElement("div",{className:"component-form"},i.a.createElement(ve.MultiSelect,{name:"dataItems",value:t,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,required:!0}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:a,type:"number",onChange:this.handleChange,name:"max"}),i.a.createElement("label",{htmlFor:"max"},"Max*")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:r,type:"text",onChange:this.handleChange,name:"unit"}),i.a.createElement("label",{htmlFor:"unit"},"Unit")))}}]),t}(n.Component);var Ye=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Xe),Je=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={url:""},a.handleChange=function(e){e.preventDefault();var t=a.props.addData;a.setState(Object(le.a)({},e.target.name,e.target.value),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties.url;this.setState({url:t})}}},{key:"render",value:function(){var e=this.state.url;return i.a.createElement("div",{className:"component-form"},i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{style:{width:"100%"},value:e,type:"text",onChange:this.handleChange,name:"url",required:!0}),i.a.createElement("label",{htmlFor:"url"},"url*")))}}]),t}(n.Component);var $e=Object(s.b)(function(e){return{ui:e.ui}})(Je),Qe=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItem:void 0,labelColor:"",valueColor:"",backgroundColor:"",timestamp:!1},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e){var t=e.properties,a=t.dataItem,r=t.labelColor,n=t.valueColor,i=t.backgroundColor,l=t.timestamp;this.setState({dataItem:a,labelColor:r,valueColor:n,backgroundColor:i,timestamp:l})}}},{key:"render",value:function(){var e=this.state,t=e.dataItem,a=e.labelColor,r=e.valueColor,n=e.backgroundColor,l=e.timestamp;return i.a.createElement("section",{className:"component-form"},i.a.createElement(ce.Dropdown,{style:{width:"100%"},optionLabel:"label",name:"dataItem",value:t,onChange:this.handleChange,options:this.dataItems,placeholder:"Select a data item",filter:!0,filterBy:"label"}),i.a.createElement(me,{color:a,handleChange:this.handleChange,label:"Label Color",name:"labelColor"}),i.a.createElement(me,{color:r,handleChange:this.handleChange,label:"Value Color",name:"valueColor"}),i.a.createElement(me,{color:n,handleChange:this.handleChange,label:"Background",name:"backgroundColor"}),i.a.createElement(ne.Checkbox,{checked:l,onChange:this.handleChange,name:"timestamp"}),i.a.createElement("label",{htmlFor:"timestamp",className:"p-checkbox-label"},"Show Timestamp"))}}]),t}(n.Component);Qe.defaultProps={};var Ze=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(Qe),et=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={dataItems:null,title:"",color:"",max:"",min:""},a.dataItems=a.props.data.dataItemDefinitions.array,a.handleChange=function(e){e.preventDefault();var t=a.props.addData,r=e.target.checked?e.target.checked:e.target.value;a.setState(Object(le.a)({},e.target.name,r),function(){t(a.state)})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.ui.modal.tile;if(e&&!e.properties.type.default){var t=e.properties,a=t.title,r=t.dataItems,n=t.color,i=t.max,l=t.min;this.setState({title:a,color:n,max:i,min:l,dataItems:r})}}},{key:"render",value:function(){var e=this.state,t=e.dataItems,a=e.title,r=e.color,n=e.max,l=e.min;return i.a.createElement("section",{className:"component-form"},i.a.createElement(ve.MultiSelect,{style:{maxHeight:"500px"},name:"dataItems",value:t,options:this.dataItems,optionLabel:"label",onChange:this.handleChange,placeholder:"Choose data items",filter:!0,scrollHeight:"300px",required:!0}),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:a,type:"text",onChange:this.handleChange,name:"title"}),i.a.createElement("label",{htmlFor:"title"},"Title")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:n,type:"number",onChange:this.handleChange,name:"max"}),i.a.createElement("label",{htmlFor:"max"},"Y-Axis Max")),i.a.createElement("span",{className:"p-float-label"},i.a.createElement(de.InputText,{value:l,type:"number",onChange:this.handleChange,name:"min"}),i.a.createElement("label",{htmlFor:"min"},"Y-Axis Min")),i.a.createElement(me,{color:r,handleChange:this.handleChange,label:"Column color:",name:"color"}),i.a.createElement("span",null,"If min and max are not specificed the axis will autoscale"))}}]),t}(n.Component);var tt=Object(s.b)(function(e){return{data:e.data,ui:e.ui}})(et),at=[{name:"Basic Graph",form:De,value:"BasicGraph"},{name:"Advanced Graph",form:Be,value:"AdvancedGraph"},{name:"Bar Graph",form:tt,value:"BarGraph"},{name:"Indicator",form:Ze,value:"Indicator"},{name:"Dial Gauge",form:fe,value:"Gauge"},{name:"Cylinder Gauge",form:He,value:"CylinderGauge"},{name:"Text/Image",form:Te,value:"TextBox"},{name:"Basic Table",form:Ue,value:"Table"},{name:"Custom Table",form:Ge,value:"CustomTable"},{name:"Google Map",form:ze,value:"Map"},{name:"iFrame",form:$e,value:"IframeTile"}],rt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={properties:{type:null}},a.handleFormSubmit=function(e){e.preventDefault();var t=a.props.activeTab,r=Object(b.a)({},a.state.properties,{type:Object(b.a)({},a.state.properties.type,{default:!0})});a.props.addTile(r,t),a.setState({properties:{type:a.state.properties.type}})},a.handleSave=function(){var e=a.props,t=e.tiles,r=e.layouts,n=e.tabs;a.props.saveDashboard(t,r,n).then(function(){return alert("Dashboard has been saved!")})},a.handleChange=function(e){e.preventDefault(),a.setState({properties:Object(le.a)({},e.target.name,e.value),valid:!0})},a.handleData=function(e){a.setState({properties:Object(b.a)({},a.state.properties,e)})},a.renderForm=function(){var e=a.state.properties.type;if(e){var t=e.form;return i.a.createElement(t,{addData:a.handleData})}return i.a.createElement("div",{style:{marginBottom:"0"}})},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ui,a=e.toggleSidebar;return i.a.createElement(oe.Sidebar,{className:"side",visible:t.sidebar,onHide:a,style:{border:"1px solid #595959"}},i.a.createElement("section",{style:{paddingTop:"2rem"}},i.a.createElement("div",null,i.a.createElement(se.Button,{className:"p-button-raised",onClick:this.handleSave,label:"Save Dashboard"})),i.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sidebar-form"},i.a.createElement(ce.Dropdown,{options:at,style:{width:"100%"},value:this.state.properties.type,onChange:this.handleChange,name:"type",placeholder:"Select Tile Type",optionLabel:"name"}),i.a.createElement("div",null,i.a.createElement(se.Button,{label:"Add Tile",type:"submit"})))))}}]),t}(n.Component);var nt=Object(s.b)(function(e){return{tiles:e.tiles,layouts:e.layouts,tabs:e.tabs,activeTab:e.activeTab,ui:e.ui}},r)(rt),it={Gauge:fe,CylinderGauge:He,SolidGauge:Ye,BasicGraph:De,TextBox:Te,Map:ze,AdvancedGraph:Be,Table:Ue,CustomTable:Ge,IframeTile:$e,Indicator:Ze,BarGraph:tt},lt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={properties:{type:null}},a.handleData=function(e){var t=a.props.ui.modal.tile;a.setState({properties:Object(b.a)({},a.state.properties,{type:t.properties.type},e)})},a.renderForm=function(){var e=a.props.ui.modal.tile;if(e&&e.properties.type&&it[e.properties.type.value]){var t=it[e.properties.type.value];return i.a.createElement(t,{addData:a.handleData})}return i.a.createElement("div",null,"No Type Selected")},a.closeModal=function(){var e=a.props.resetModal;a.setState({properties:{type:null}}),e()},a.submitModal=function(){var e=a.props,t=e.resetModal,r=e.ui,n=e.editTile,i=e.activeTab,l=a.state.properties,o=l.type,s=Object(b.a)({},r.modal.tile,{properties:Object(b.a)({},l,{type:Object(b.a)({},o,{default:!1})})});l.type&&n(s,i.index),a.setState({properties:{type:null}}),t()},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.ui,t="".concat(e.modal.visible?"modal-show":"modal-hide");return i.a.createElement("div",{className:"background ".concat(t)},i.a.createElement(ke.a,{handle:"div.modal-header"},i.a.createElement("div",null,i.a.createElement("section",{className:"modal"},i.a.createElement("div",{className:"modal-header",style:{cursor:"move"}},i.a.createElement("h1",{style:{margin:0,fontSize:"1.25rem"}},"Edit Tile:")),i.a.createElement("div",{className:"modal-main"},this.renderForm(),i.a.createElement("div",{className:"modal-footer"},i.a.createElement(se.Button,{label:"Submit",icon:"pi pi-check",onClick:this.submitModal}),i.a.createElement(se.Button,{label:"Close",icon:"pi pi-times",onClick:this.closeModal,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}})))))))}}]),t}(n.Component);var ot=Object(s.b)(function(e){return{ui:e.ui,activeTab:e.activeTab}},r)(lt),st=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={nextTab:a.props.tabs.length+1,visible:!1,name:"",type:""},a.renderTab=function(e,t){var r=a.props,n=r.activeTab,l=r.ui,o=l.viewOnly?"none":"",s="tab-item";return e.index===n.index&&(s+=" tab-active"),i.a.createElement("li",{key:t,className:s,style:{textAlign:"center"},onClick:function(){return a.props.changeTab(e)}},i.a.createElement("span",{name:"edit",onDoubleClick:l.viewOnly?null:function(t){return a.handleTabRename(t,e)},title:"".concat(e.name,"\nDouble click to edit tab name")}," ",e.name),i.a.createElement("span",{style:{display:o},className:"tab-delete",title:"Click to delete tab"},i.a.createElement(re.g,{style:{height:"1rem"},className:"tab-delete tab-icon",size:"1rem",onClick:function(e){return a.handleDeleteTab(e,t)}})))},a.handleTabRename=function(e,t){e.preventDefault(),e.stopPropagation(),a.setState({name:t.name,type:t}),a.openModal()},a.handleAddTab=function(e){a.setState({type:"add"}),a.openModal()},a.handleDeleteTab=function(e,t,r){e.stopPropagation();var n=a.props,i=n.deleteTab,l=n.changeTab,o=n.tabs,s=n.activeTab;window.confirm("Are you sure you want to delete this tab?")&&(i(t,r),s.index===t&&l(o[0]))},a.handleSubmit=function(e){var t=a.state,r=t.nextTab,n=t.name,i=t.type,l=a.props.tabs.length;"add"===i?(a.props.addTab({name:"".concat(""!==n?n:"tab"+r),index:l,id:S()}),a.setState({nextTab:r+1,visible:!1,name:""})):"object"===typeof i&&(a.props.editTab(i,n),a.setState({visible:!1,name:""}))},a.closeModal=function(){a.setState({visible:!1,name:""})},a.openModal=function(){a.setState({visible:!0},function(){})},a.handleChange=function(e){e.preventDefault(),a.setState(Object(le.a)({},e.target.name,e.target.value))},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.state.type,a=this.props,r=a.tabs,n=a.ui.viewOnly?"none":"",l="".concat(this.state.visible?"modal-show":"modal-hide");return i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",{className:"tabs"},r&&r.map(this.renderTab),i.a.createElement(re.b,{name:"add",style:{display:n,height:"1.75rem"},size:"1.75rem",className:"newtab-btn",title:"Create New Tab",onClick:function(t){return e.handleAddTab(t)}})),i.a.createElement("div",{className:"background ".concat(l),autoFocus:!1},i.a.createElement(ke.a,{handle:"div.tab-modal-header"},i.a.createElement("div",null,i.a.createElement("section",{className:"tab-modal"},i.a.createElement("div",{className:"tab-modal-header",style:{cursor:"move"}},i.a.createElement("h1",{style:{fontSize:"1.25rem"}},"add"===t?"Add New Tab":"Edit Tab Name")),i.a.createElement("div",{className:"modal-main"},i.a.createElement("div",null,i.a.createElement(de.InputText,{placeholder:"Tab Name",ref:function(t){e.nameInput=t},name:"name",style:{width:"100%",marginBottom:"1rem"},value:this.state.name,onChange:this.handleChange})),i.a.createElement("div",{className:"modal-footer"},i.a.createElement(se.Button,{label:"Submit",icon:"pi pi-check",onClick:function(t){return e.handleSubmit(t)}}),i.a.createElement(se.Button,{label:"Close",icon:"pi pi-times",onClick:this.closeModal,style:{marginLeft:"1rem",background:"#e53935",border:"1px solid #e53935"}}))))))))}}]),t}(n.Component);var ct=Object(s.b)(function(e){return{activeTab:e.activeTab,tabs:e.tabs,ui:e.ui}},r)(st),dt=a(156),ut=a(20);var pt=new he.a,mt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).chartInit=function(){var e=a.props.tile,t=e.id,r=e.properties,n=r.band1,i=r.band1End,l=r.band2,o=r.band2End,s=r.band3,c=r.dataItem,d=r.max,u=r.min,p=(r.name,r.unit),m=(r.type,a.props.currentData.object);console.log(u),he.j.commercialLicense=!0,a.chart=he.h(t,ut.g),a.chart.paddingRight=0,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=0,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.innerRadius=-8,a.chart.startAngle=135,a.chart.endAngle=405;var h=a.chart.xAxes.push(new ut.m);h.min=+u,h.max=+d,h.strictMinMax=!0,h.renderer.ticks.template.stroke="#fff",h.renderer.labels.template.radius=5,h.renderer.ticks.template.strokeOpacity=.35,h.renderer.grid.template.disabled=!0,h.renderer.ticks.template.length=-12,h.hiddenState.properties.opacity=1,h.hiddenState.properties.visible=!0,h.setStateOnChildren=!0,h.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"},{number:1e6,suffix:"M"},{number:1e9,suffix:"G"}],h.numberFormatter.numberFormat="#,###.#a";var _=h.axisRanges.create();_.value=u,_.endValue=i?(u+d)*i/d:.5*(u+d),_.axisFill.fillOpacity=.9,_.axisFill.fill=n?"#".concat(n):pt.getIndex(0);var b=h.axisRanges.create();b.value=i?(u+d)*i/d:.5*(u+d),b.endValue=o?(d-u)*o/d+u:.8*(d-u)+u,b.axisFill.fillOpacity=.9,b.axisFill.fill=l?"#".concat(l):pt.getIndex(2);var f=h.axisRanges.create();f.value=o?(d-u)*o/d+u:.8*(d-u)+u,f.endValue=d,f.axisFill.fillOpacity=.9,f.axisFill.fill=s?"#".concat(s):pt.getIndex(4),a.label=a.chart.radarContainer.createChild(he.d),a.label.isMeasured=!1,a.label.horizontalCenter="middle",a.label.verticalCenter="bottom",a.label.y=70,a.label.fontSize=20,a.label.text="".concat(u," ").concat(p);var v=a.chart.titles.create(),g=m[c.dataItemId];v.text=g.alias,v.marginBottom=15,a.hand=a.chart.hands.push(new ut.c),a.updateValue()},a.updateValue=function(){var e=a.props.tile.properties,t=a.props.currentData.object;try{var r=t[e.dataItem.dataItemId].value.toFixed(2);a.hand.showValue(+r,1e3,he.i.cubicOut),a.label.text="".concat(r," ").concat(e.unit)}catch(n){console.log("hello"),a.hand.showValue(e.min,1e3,he.i.cubicOut),a.label.text="undefined"}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tile.id;this.props.tile.properties.type.default?this.chart=function(e){he.j.commercialLicense=!0;var t=new he.a,a=he.h(e,ut.g);a.paddingRight=0,a.paddingLeft=0,a.paddingTop=5,a.paddingBottom=0,a.marginRight=0,a.marginLeft=0,a.marginTop=5,a.marginBottom=0,a.innerRadius=-8,a.startAngle=135,a.endAngle=405;var r=a.xAxes.push(new ut.m);r.min=0,r.max=100,r.strictMinMax=!0,r.renderer.ticks.template.stroke="#fff",r.renderer.labels.template.radius=5,r.renderer.ticks.template.strokeOpacity=.35,r.renderer.grid.template.disabled=!0,r.renderer.ticks.template.length=-12,r.hiddenState.properties.opacity=1,r.hiddenState.properties.visible=!0,r.setStateOnChildren=!0,r.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"},{number:1e6,suffix:"M"},{number:1e9,suffix:"G"}],r.numberFormatter.numberFormat="#,###.#a";var n=r.axisRanges.create();n.value=0,n.endValue=50,n.axisFill.fillOpacity=.9,n.axisFill.fill=t.getIndex(0);var i=r.axisRanges.create();i.value=50,i.endValue=75,i.axisFill.fillOpacity=.9,i.axisFill.fill=t.getIndex(2);var l=r.axisRanges.create();l.value=75,l.endValue=100,l.axisFill.fillOpacity=.9,l.axisFill.fill=t.getIndex(4);var o=a.radarContainer.createChild(he.d);o.isMeasured=!1,o.horizontalCenter="middle",o.verticalCenter="bottom",o.y=70,o.fontSize=20,o.text="default";var s=a.titles.create();return s.text="Gauge",s.marginBottom=15,a.hands.push(new ut.c).showValue(50),a}(e):this.chartInit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;if(t.type.default)return null;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),this.updateValue()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props.tile.id;return i.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(n.Component);mt.defaultProps={tile:{id:S(),properties:{type:{name:"Dial Gauge",value:"Gauge"},band1:"",band2:"",band3:"",band1End:"",band2End:"",band3End:"",min:0,max:100,unit:"",name:"",dataItem:{}}}};var ht=Object(s.b)(function(e){return{currentData:e.currentData}})(mt),_t=[{date:"2012-07-27",value:13},{date:"2012-07-28",value:11},{date:"2012-07-29",value:15},{date:"2012-07-30",value:16},{date:"2012-07-31",value:18},{date:"2012-08-01",value:13},{date:"2012-08-02",value:22},{date:"2012-08-03",value:23},{date:"2012-08-04",value:20},{date:"2012-08-05",value:17},{date:"2012-08-06",value:16},{date:"2012-08-07",value:18},{date:"2012-08-08",value:21},{date:"2012-08-09",value:26},{date:"2012-08-10",value:24},{date:"2012-08-11",value:29},{date:"2012-08-12",value:32},{date:"2012-08-13",value:18},{date:"2012-08-14",value:24},{date:"2012-08-15",value:22},{date:"2012-08-16",value:18},{date:"2012-08-17",value:19},{date:"2012-08-18",value:14},{date:"2012-08-19",value:15},{date:"2012-08-20",value:12},{date:"2012-08-21",value:8},{date:"2012-08-22",value:9},{date:"2012-08-23",value:8},{date:"2012-08-24",value:7},{date:"2012-08-25",value:5},{date:"2012-08-26",value:11},{date:"2012-08-27",value:13},{date:"2012-08-28",value:18},{date:"2012-08-29",value:20},{date:"2012-08-30",value:29},{date:"2012-08-31",value:33},{date:"2012-09-01",value:42},{date:"2012-09-02",value:35},{date:"2012-09-03",value:31},{date:"2012-09-04",value:47},{date:"2012-09-05",value:52},{date:"2012-09-06",value:46},{date:"2012-09-07",value:41},{date:"2012-09-08",value:43},{date:"2012-09-09",value:40},{date:"2012-09-10",value:39},{date:"2012-09-11",value:34},{date:"2012-09-12",value:29},{date:"2012-09-13",value:34},{date:"2012-09-14",value:37},{date:"2012-09-15",value:42},{date:"2012-09-16",value:49},{date:"2012-09-17",value:46},{date:"2012-09-18",value:47},{date:"2012-09-19",value:55},{date:"2012-09-20",value:59},{date:"2012-09-21",value:58},{date:"2012-09-22",value:57},{date:"2012-09-23",value:61},{date:"2012-09-24",value:59},{date:"2012-09-25",value:67},{date:"2012-09-26",value:65},{date:"2012-09-27",value:61},{date:"2012-09-28",value:66},{date:"2012-09-29",value:69},{date:"2012-09-30",value:71},{date:"2012-10-01",value:67},{date:"2012-10-02",value:63},{date:"2012-10-03",value:46},{date:"2012-10-04",value:32},{date:"2012-10-05",value:21},{date:"2012-10-06",value:18},{date:"2012-10-07",value:21},{date:"2012-10-08",value:28},{date:"2012-10-09",value:27},{date:"2012-10-10",value:36},{date:"2012-10-11",value:33},{date:"2012-10-12",value:31},{date:"2012-10-13",value:30},{date:"2012-10-14",value:34},{date:"2012-10-15",value:38},{date:"2012-10-16",value:37},{date:"2012-10-17",value:44},{date:"2012-10-18",value:49},{date:"2012-10-19",value:53},{date:"2012-10-20",value:57},{date:"2012-10-21",value:60},{date:"2012-10-22",value:61},{date:"2012-10-23",value:69},{date:"2012-10-24",value:67},{date:"2012-10-25",value:72},{date:"2012-10-26",value:77},{date:"2012-10-27",value:75},{date:"2012-10-28",value:70},{date:"2012-10-29",value:72},{date:"2012-10-30",value:70},{date:"2012-10-31",value:72},{date:"2012-11-01",value:73},{date:"2012-11-02",value:67},{date:"2012-11-03",value:68},{date:"2012-11-04",value:65},{date:"2012-11-05",value:71},{date:"2012-11-06",value:75},{date:"2012-11-07",value:74},{date:"2012-11-08",value:71},{date:"2012-11-09",value:76},{date:"2012-11-10",value:77},{date:"2012-11-11",value:81},{date:"2012-11-12",value:83},{date:"2012-11-13",value:80},{date:"2012-11-14",value:81},{date:"2012-11-15",value:87},{date:"2012-11-16",value:82},{date:"2012-11-17",value:86},{date:"2012-11-18",value:80},{date:"2012-11-19",value:87},{date:"2012-11-20",value:83},{date:"2012-11-21",value:85},{date:"2012-11-22",value:84},{date:"2012-11-23",value:82},{date:"2012-11-24",value:73},{date:"2012-11-25",value:71},{date:"2012-11-26",value:75},{date:"2012-11-27",value:79},{date:"2012-11-28",value:70},{date:"2012-11-29",value:73},{date:"2012-11-30",value:61},{date:"2012-12-01",value:62},{date:"2012-12-02",value:66},{date:"2012-12-03",value:65},{date:"2012-12-04",value:73},{date:"2012-12-05",value:79},{date:"2012-12-06",value:78},{date:"2012-12-07",value:78},{date:"2012-12-08",value:78},{date:"2012-12-09",value:74},{date:"2012-12-10",value:73},{date:"2012-12-11",value:75},{date:"2012-12-12",value:70},{date:"2012-12-13",value:77},{date:"2012-12-14",value:67},{date:"2012-12-15",value:62},{date:"2012-12-16",value:64},{date:"2012-12-17",value:61},{date:"2012-12-18",value:59},{date:"2012-12-19",value:53},{date:"2012-12-20",value:54},{date:"2012-12-21",value:56},{date:"2012-12-22",value:59},{date:"2012-12-23",value:58},{date:"2012-12-24",value:55},{date:"2012-12-25",value:52},{date:"2012-12-26",value:54},{date:"2012-12-27",value:50},{date:"2012-12-28",value:50},{date:"2012-12-29",value:51},{date:"2012-12-30",value:52},{date:"2012-12-31",value:58},{date:"2013-01-01",value:60},{date:"2013-01-02",value:67},{date:"2013-01-03",value:64},{date:"2013-01-04",value:66},{date:"2013-01-05",value:60},{date:"2013-01-06",value:63},{date:"2013-01-07",value:61},{date:"2013-01-08",value:60},{date:"2013-01-09",value:65},{date:"2013-01-10",value:75},{date:"2013-01-11",value:77},{date:"2013-01-12",value:78},{date:"2013-01-13",value:70},{date:"2013-01-14",value:70},{date:"2013-01-15",value:73},{date:"2013-01-16",value:71},{date:"2013-01-17",value:74},{date:"2013-01-18",value:78},{date:"2013-01-19",value:85},{date:"2013-01-20",value:82},{date:"2013-01-21",value:83},{date:"2013-01-22",value:88},{date:"2013-01-23",value:85},{date:"2013-01-24",value:85},{date:"2013-01-25",value:80},{date:"2013-01-26",value:87},{date:"2013-01-27",value:84},{date:"2013-01-28",value:83},{date:"2013-01-29",value:84},{date:"2013-01-30",value:81}],bt=a(87),ft=a.n(bt);function vt(e){he.j.commercialLicense=!0;var t=he.h(e,ut.n);t.paddingRight=10,t.paddingLeft=0,t.paddingTop=5,t.paddingBottom=0,t.marginRight=10,t.marginLeft=0,t.marginTop=5,t.marginBottom=0,t.exporting.menu=new he.b,t.exporting.menu.verticalAlign="bottom",t.exporting.menu.align="left";var a=t.xAxes.push(new ut.f);a.tooltipDateFormat="HH:mm:ss",a.baseInterval={timeUnit:"second",count:1},a.renderer.minGridDistance=75,a.renderer.grid.template.location=.5,a.startLocation=.5,a.endLocation=.5,t.data=function(){var e=[],t=new Date;t.setDate(t.getDate()-1e3);for(var a=1200,r=0;r<500;r++){var n=new Date(t);n.setDate(n.getDate()+r),a+=Math.round((Math.random()<.5?1:-1)*Math.random()*10),e.push({date:n,visits:a})}return e}();var r=t.yAxes.push(new ut.m);r.renderer.line.strokeOpacity=1,r.renderer.line.strokeWidth=2,r.renderer.grid.template.disabled=!0,t.cursor=new ut.p,t.cursor.behavior="panXY",t.cursor.xAxis=a;var n=t.series.push(new ut.i);n.dataFields.valueY="visits",n.dataFields.dateX="date",n.strokeWidth=2,n.minBulletDistance=10,n.tooltipText="{valueY}",n.tooltip.pointerOrientation="vertical",n.tooltip.background.cornerRadius=20,n.tooltip.background.fillOpacity=.5,n.tooltip.label.padding(12,12,12,12),t.scrollbarX=new he.f,t.scrollbarX.parent=t.bottomAxesContainer,t.legend=new ut.h;var i=t.titles.create();return i.text="Basic Graph",i.marginBottom=5,t}var gt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0},a.chartInit=Object(O.a)(D.a.mark(function e(){var t,r,n,i,l,o,s,c,d,u,p,m;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.tile,r=t.id,n=t.properties,i=a.props.currentData,he.j.commercialLicense=!0,a.chart=he.h(r,ut.n),a.chart.paddingRight=10,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=10,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.exporting.menu=new he.b,a.chart.exporting.menu.verticalAlign="bottom",a.chart.exporting.menu.align="left",(l=a.chart.xAxes.push(new ut.f)).tooltipDateFormat="HH:mm:ss",l.baseInterval={timeUnit:"second",count:1},l.renderer.minGridDistance=75,l.renderer.grid.template.location=.5,l.startLocation=.5,l.endLocation=.5,e.prev=22,!n.dataItems){e.next=29;break}return e.next=26,a.fetchData();case 26:e.t0=e.sent,e.next=30;break;case 29:e.t0=_t;case 30:a.chart.data=e.t0,e.next=39;break;case 33:return e.prev=33,e.t1=e.catch(22),console.log(e.t1),a.setState({loading:"failed"}),a.chart.dispose(),e.abrupt("return");case 39:if((o=a.chart.yAxes.push(new ut.m)).title.text=""!==n.yaxis?n.yaxis:"",o.renderer.line.strokeOpacity=1,o.renderer.line.strokeWidth=2,o.renderer.grid.template.disabled=!0,a.chart.cursor=new ut.p,a.chart.cursor.behavior="panXY",a.chart.cursor.xAxis=l,n.dataItems)for(s=P("assetId"),c=0;c<n.dataItems.length;c++)d=i.object[n.dataItems[c].dataItemId],u=d.alias,p="".concat(s,"-").concat(d.dataItemId),a.createSeries(p,"timestamp",u);else a.createSeries("value","date","No dataItems selected");a.chart.scrollbarX=new he.f,a.chart.scrollbarX.parent=a.chart.bottomAxesContainer,a.chart.legend=n.legend?new ut.h:null,(m=a.chart.titles.create()).text=""!==n.title?n.title:"",m.marginBottom=5,a.setState({loading:!1});case 55:case"end":return e.stop()}},e,this,[[22,33]])})),a.fetchData=Object(O.a)(D.a.mark(function e(){var t,r,n,i,l,o,s,c,d,u,p;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile.properties,r=t.dataItems,n=t.timeType,i=t.liveStart,l=t.fixedStart,o=P("assetId"),s={five:new Date(new Date-3e5).toJSON(),ten:new Date(new Date-6e5).toJSON(),halfhour:new Date(new Date-18e5).toJSON(),hour:new Date(new Date-36e5).toJSON(),fixedStart:new Date(new Date-36e5*l).toJSON()},c="live"===n?i?s[i]:s.hour:s.fixedStart,d=(new Date).toJSON(),"/api/HistoricalDataItems",u=r.map(function(e){return{assetId:o,dataItemId:e.dataItemId}}),e.prev=7,e.next=10,M()({url:"/api/HistoricalDataItems",baseURL:L.a.BASE_URL,method:"POST",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN},data:{Name:"request",DataItems:u,StartTime:c,EndTime:d,Format:{Type:"DataItemChart",Threshold:1e3}}});case 10:if(0===(p=e.sent).data.length){e.next=15;break}return e.abrupt("return",p.data.map(function(e){return Object(b.a)({},e,{assetId:o,timestamp:new Date(e.timestamp)})}));case 15:return e.abrupt("return",[{timestamp:new Date,value:0}]);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(7),e.abrupt("return",[{timestamp:new Date,value:0}]);case 21:case"end":return e.stop()}},e,this,[[7,18]])})),a.createSeries=function(e,t,r){a.props.tile.properties.timeType;var n=a.chart.series.push(new ut.i);n.dataFields.valueY=e,n.dataFields.dateX=t,n.strokeWidth=1.5,n.name=r,n.minBulletDistance=20,n.interpolationDuration=0,n.transitionDuration=0,n.tooltipText="".concat(r,": {").concat(e,"}"),n.tooltip.background.cornerRadius=20,n.tooltip.background.strokeOpacity=0,n.tooltip.pointerOrientation="vertical",n.tooltip.label.minWidth=40,n.tooltip.label.minHeight=40,n.tooltip.label.textAlign="middle",n.tooltip.label.textValign="middle";var i=n.bullets.push(new ut.b);i.circle.strokeWidth=1,i.circle.radius=2,i.circle.fill=he.g("#fff"),i.states.create("hover").properties.scale=1.3},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tile.id;this.props.tile.properties.type.default?(this.chart=vt(e),this.setState({loading:!1})):this.chartInit()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData,r=this.props.data.asset,n=P("assetId");if(e.tile.properties!==t&&(this.chart.dispose(),this.setState({loading:!0}),this.chartInit()),"live"===t.timeType&&r.connected)try{for(var i={},l=0;l<t.dataItems.length;l++){var o=t.dataItems[l];i["".concat(n,"-").concat(o.dataItemId)]=a.object["".concat(o.dataItemId)]?a.object["".concat(o.dataItemId)].value:0}i.timestamp=new Date,0===this.chart.data.length?this.chart.data=[i]:this.chart.addData(i,1)}catch(s){console.log(s)}}},{key:"render",value:function(){var e=this,t=this.props.tile.id,a=this.state.loading;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:!0===a?"block":"none"}},i.a.createElement(A.ScaleLoader,{sizeUnit:"px",size:30,color:ft.a.fontColor})),i.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:"failed"===a?"block":"none"}},"Something went wrong, try refreshing this tile"),i.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},i.a.createElement("span",{style:{position:"absolute",top:"-25px",left:"15px",zIndex:1e3,cursor:"pointer"},title:"Click to refresh graph"},i.a.createElement(re.d,{style:{height:"1rem",marginLeft:".75rem",cursor:"pointer"},onClick:function(){e.setState({loading:!0}),e.chartInit()}})),i.a.createElement("div",{id:t,style:{width:"100%",height:"97%",position:"absolute",bottom:"0"}})))}}]),t}(n.PureComponent);gt.defaultProps={data:{currentData:{object:{},array:[]}}};var yt=Object(s.b)(function(e){return{data:e.data,currentData:e.currentData}})(gt),Et=a(187),xt=a(188),Dt=window.google,Ot=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={overlays:[],options:{},loading:!0},a.onMapReady=Object(O.a)(D.a.mark(function e(){var t,r,n,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.data.asset,!a.props.tile.properties.showAll){e.next=8;break}return e.next=5,a.fetchData();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:r=e.t0,t&&Dt&&(n=r?r.map(function(e){return new Dt.maps.Marker({position:{lat:e.latitude,lng:e.longitude},title:e.assetAlias})}):[new Dt.maps.Marker({position:{lat:t.latitude,lng:t.longitude},title:t.assetAlias})],i={center:t?{lat:t.latitude,lng:t.longitude}:{lat:29.7604,lng:-95.3698},zoom:10},a.setState({overlays:n,options:i,loading:!1}));case 11:case"end":return e.stop()}},e,this)})),a.fetchData=Object(O.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/assets",e.prev=1,e.next=4,M()({url:"/api/assets",baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[1,8]])})),a.onOverlayClick=function(e){},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&this.onMapReady()}},{key:"render",value:function(){var e=this.props.data.asset,t=this.state,a=t.overlays,r=t.loading,n={center:e?{lat:e.latitude,lng:e.longitude}:{lat:29.7604,lng:-95.3698},zoom:10};return e?i.a.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:function(e){return e.stopPropagation()}},i.a.createElement(xt.GMap,{options:n,overlays:a,onMapReady:this.onMapReady,style:{width:"100%",height:"100%"},onMouseDown:function(e){return e.stopPropagation()}})):i.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:!0===r?"block":"none"}},i.a.createElement(A.ScaleLoader,{sizeUnit:"px",size:30,color:ft.a.fontColor}))}}]),t}(n.Component);var wt=Object(s.b)(function(e){return{data:e.data}},r)(Ot);function Ct(e){he.j.commercialLicense=!0;var t=he.h(e,ut.n);t.paddingRight=10,t.paddingLeft=0,t.paddingTop=5,t.paddingBottom=0,t.marginRight=10,t.marginLeft=0,t.marginTop=5,t.marginBottom=0,t.exporting.menu=new he.b,t.exporting.menu.verticalAlign="bottom",t.exporting.menu.align="left";for(var a=[],r=1e3,n=1200,i=0;i<360;i++)r+=Math.round((Math.random()<.5?1:-1)*Math.random()*100),n+=Math.round((Math.random()<.5?1:-1)*Math.random()*100),a.push({date1:new Date(2015,0,i),price1:r,price2:n});t.data=a;var l=t.xAxes.push(new ut.f);l.tooltipDateFormat="HH:mm:ss",l.baseInterval={timeUnit:"second",count:1},l.renderer.minGridDistance=100,l.renderer.grid.template.location=.5,l.startLocation=.5,l.endLocation=.5,t.cursor=new ut.p,t.cursor.behavior="panXY",t.cursor.xAxis=l;var o=t.yAxes.push(new ut.m);o.tooltip.disabled=!0,o.renderer.minWidth=60;var s=t.yAxes.push(new ut.m);s.tooltip.disabled=!0,s.renderer.grid.template.strokeDasharray="2,3",s.renderer.minWidth=60;var c=t.series.push(new ut.i);c.name="2015",c.dataFields.dateX="date1",c.dataFields.valueY="price1",c.tooltipText="{valueY.value}",c.fill=he.g("#e59165"),c.stroke=he.g("#e59165");var d=t.series.push(new ut.i);d.name="2017",d.dataFields.dateX="date1",d.dataFields.valueY="price2",d.yAxis=s,d.xAxis=l,d.tooltipText="{valueY.value}",d.fill=he.g("#dfcc64"),d.stroke=he.g("#dfcc64"),t.scrollbarX=new he.f,t.scrollbarX.parent=t.bottomAxesContainer,t.legend=new ut.h;var u=t.titles.create();return u.text="Advanced Graph",u.marginBottom=5,t}var Tt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0},a.chartInit=Object(O.a)(D.a.mark(function e(){var t,r,n,i,l,o,s,c,d,u,p,m,h;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile,r=t.id,n=t.properties,i=a.props.currentData,he.j.commercialLicense=!0,a.chart=he.h(r,ut.n),a.chart.paddingRight=10,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=10,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.exporting.menu=new he.b,a.chart.exporting.menu.verticalAlign="bottom",a.chart.exporting.menu.align="left",e.prev=15,e.next=18,a.fetchData();case 18:a.chart.data=e.sent,e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(15),console.log(e.t0),a.setState({loading:"failed"}),a.chart.dispose(),e.abrupt("return");case 27:if((l=a.chart.xAxes.push(new ut.f)).tooltipDateFormat="HH:mm:ss",l.baseInterval={timeUnit:"second",count:1},l.renderer.minGridDistance=100,l.renderer.grid.template.location=.5,l.startLocation=.5,l.endLocation=.5,a.chart.cursor=new ut.p,a.chart.cursor.behavior="panXY",a.chart.cursor.xAxis=l,n.axes)for(o=0;o<n.axes.length;o++)s=o%2!==0,a.createAxes(n.axes[o],s);else a.chart.yAxes.push(new ut.m);if(n.series)for(c=P("assetId"),d=0;d<n.series.length;d++){u=i.object[n.series[d].dataItem.dataItemId],p=u.alias,m="".concat(c,"-").concat(u.dataItemId);try{a.createSeries(m,"timestamp",p,n.series[d])}catch(_){console.log(_)}}else a.createSeries("value","date","default",a.chart.yAxes.values[0]);a.chart.scrollbarX=new he.f,a.chart.scrollbarX.parent=a.chart.bottomAxesContainer,a.chart.legend=n.legend?new ut.h:null,(h=a.chart.titles.create()).text=""!==n.title?n.title:"",h.marginBottom=5,a.setState({loading:!1});case 46:case"end":return e.stop()}},e,this,[[15,21]])})),a.fetchData=Object(O.a)(D.a.mark(function e(){var t,r,n,i,l,o,s,c,d,u,p;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.tile.properties,r=t.liveStart,n=t.fixedStart,i=t.timeType,l=t.series,o=P("assetId"),s={five:new Date(new Date-3e5).toJSON(),ten:new Date(new Date-6e5).toJSON(),halfhour:new Date(new Date-18e5).toJSON(),hour:new Date(new Date-36e5).toJSON(),fixedStart:new Date(new Date-36e5*n).toJSON()},c="live"===i?r?s[r]:s.hour:s.fixedStart,d=(new Date).toJSON(),"/api/HistoricalDataItems",u=l?l.map(function(e){return{assetId:o,dataItemId:e.dataItem?e.dataItem.dataItemId:0}}):{},e.prev=7,e.next=10,M()({url:"/api/HistoricalDataItems",baseURL:L.a.BASE_URL,method:"POST",timeout:5e3,headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN},data:{Name:"request",DataItems:u,StartTime:c,EndTime:d,Format:{Type:"DataItemChart",Threshold:1e3}}});case 10:if(0===(p=e.sent).data.length){e.next=15;break}return e.abrupt("return",p.data.map(function(e){return Object(b.a)({},e,{assetId:o,timestamp:new Date(e.timestamp)})}));case 15:return e.abrupt("return",[{timestamp:new Date,value:0}]);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(7),e.abrupt("return",[{timestamp:new Date,value:0}]);case 21:case"end":return e.stop()}},e,this,[[7,18]])})),a.createSeries=function(e,t,r,n){a.props.tile.properties.timeType;var i=a.chart.series.push(new ut.i);i.dataFields.valueY=e,i.dataFields.dateX=t,i.strokeWidth=1.5,i.name=r,i.yAxis=n.axis?a[n.axis.label]:n,i.minBulletDistance=20,n.color&&""!==n.color&&(i.stroke=he.g("#".concat(n.color)),i.fill=i.stroke),i.tooltipText="".concat(r,": {").concat(e,"}"),i.tooltip.background.cornerRadius=20,i.tooltip.background.strokeOpacity=0,i.tooltip.pointerOrientation="vertical",i.tooltip.label.minWidth=40,i.tooltip.label.minHeight=40,i.tooltip.label.textAlign="middle",i.tooltip.label.textValign="middle";var l=i.bullets.push(new ut.b);l.circle.strokeWidth=1,l.circle.radius=2,l.circle.fill=he.g("#fff"),l.states.create("hover").properties.scale=1.3},a.createAxes=function(e,t){a[e.label]=a.chart.yAxes.push(new ut.m),a[e.label].title.text=""!==e.label?e.label:"",a[e.label].renderer.line.strokeOpacity=1,a[e.label].renderer.line.strokeWidth=2,a[e.label].renderer.grid.template.disabled=!0,a[e.label].renderer.opposite=t,a[e.label].min=""!==e.min?+e.min:null,a[e.label].max=""!==e.max?+e.max:null,""!==e.min&&""!==e.max&&(a[e.label].strictMinMax=!0)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.tile.id,!this.props.tile.properties.type.default){e.next=7;break}this.chart=Ct(t),this.setState({loading:!1}),e.next=9;break;case 7:return e.next=9,this.chartInit();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData,r=this.props.data.asset,n=P("assetId");if(e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),"live"===t.timeType&&r.connected)try{for(var i={},l=0;l<t.series.length;l++)try{var o=t.series[l].dataItem;i["".concat(n,"-").concat(o.dataItemId)]=a.object["".concat(o.dataItemId)]?a.object["".concat(o.dataItemId)].value:0}catch(s){console.log(s)}i.timestamp=new Date,this.chart.addData(i,1)}catch(s){console.log(s)}}},{key:"render",value:function(){var e=this.props.tile.id,t=this.state.loading,a=t?"block":"none";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:"failed"===t?"block":"none"}},"Something went wrong, try refreshing this tile"),i.a.createElement("div",{style:{position:"absolute",top:"40%",left:"50%",transform:"translateX(-50%)",display:a}},i.a.createElement(A.ScaleLoader,{sizeUnit:"px",size:30,color:ft.a.fontColor})),i.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},i.a.createElement("div",{id:e,style:{width:"100%",height:"96%",position:"absolute",bottom:"0"},onMouseDown:function(e){return e.stopPropagation()}})))}}]),t}(n.PureComponent);Tt.defaultProps={data:{currentData:{object:{},array:[]}}};var It=Object(s.b)(function(e){return{currentData:e.currentData,data:e.data}})(Tt);var kt=function(e){return i.a.createElement("div",null,i.a.createElement("p",{style:{textAlign:"center",margin:0}},"Either no type was selected or this tile type is deprecated, please delete and recreate this tile"))},At=a(93),jt=a(81);function Mt(){return i.a.createElement(At.DataTable,{value:function(){for(var e=[],t=0;t<100;t++)e.push({label:"datapoint ".concat(t),value:Math.floor(100*Math.random())});return e}(),rows:10,paginator:!0},i.a.createElement(jt.Column,{field:"label",header:"Label",sortable:!0}),i.a.createElement(jt.Column,{field:"value",header:"Value",sortable:!0}))}var Lt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={globalFilter:"",data:[],loading:!0},a.fetchData=Object(O.a)(D.a.mark(function e(){var t,r,n,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.tile.properties,r=t.option,n=t.search,i=P("assetId"),e.t0=r.value,e.next="dataItems"===e.t0?5:"alarms"===e.t0?7:"events"===e.t0?9:"files"===e.t0?11:13;break;case 5:return a.setState({loading:!1,globalFilter:n}),e.abrupt("break",15);case 7:return M()({url:"/api/Assets/".concat(i,"/Alarms"),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:n})}),e.abrupt("break",15);case 9:return M()({url:"/api/Assets/".concat(i,"/Events"),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:n})}),e.abrupt("break",15);case 11:return M()({url:"/api/assets/".concat(i),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}}).then(function(e){var t=new Date(new Date-6048e5).toJSON(),r=e.data.serialNumber;M()({url:"/api/files?hostname=".concat(r,"&startDate=").concat(t),baseURL:L.a.BASE_URL,method:"GET",headers:{"Content-Type":"application/json",Authorization:L.a.TOKEN}}).then(function(e){return a.setState({data:e.data,loading:!1,globalFilter:n})})}),e.abrupt("break",15);case 13:return a.setState({loading:!1}),e.abrupt("break",15);case 15:case"end":return e.stop()}},e,this)})),a.export=function(){a.dt.exportCSV()},a.renderFileTable=function(){var e=a.state.data,t=[{header:"File Name",field:"filename"},{header:"Host Name",field:"hostname"},{header:"haspId",field:"haspId"},{header:"Timestamp",field:"timestamp"}].map(function(e,t){return"filename"===e.field?i.a.createElement(jt.Column,{key:t,field:e.field,header:e.header,sortable:!0,body:function(e,t){return i.a.createElement("a",{href:"/api/files/".concat(e.fileId,"/download")},"".concat(e.filename))}}):i.a.createElement(jt.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return i.a.createElement(At.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderEventTable=function(){var e=a.state.data,t=[{header:"Name",field:"name"},{header:"Cause",field:"cause"},{header:"Received",field:"received"},{header:"Timestamp",field:"timestamp"},{header:"Count",field:"count"}].map(function(e,t){return i.a.createElement(jt.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return i.a.createElement(At.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderAlarmTable=function(){var e=a.state.data,t=[{header:"Name",field:"name"},{header:"Reason",field:"reason"},{header:"Cause",field:"cause"},{header:"Last Raised",field:"raised"},{header:"Severity",field:"severity"},{header:"Count",field:"count"}].map(function(e,t){return i.a.createElement(jt.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return i.a.createElement(At.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,globalFilter:a.state.globalFilter,header:a.header},t)},a.renderDataItemTable=function(){var e,t=a.state.globalFilter,r=a.props.currentData;r&&(e=r.array.filter(function(e){try{return e.alias.match(t)}catch(a){return e.alias.includes(t)}}).map(function(e){return Object(b.a)({},e,{value:Math.round(1e3*e.value)/1e3})}));var n=[{header:"Alias",field:"alias"},{header:"Value",field:"value"}].map(function(e,t){return i.a.createElement(jt.Column,{key:t,field:e.field,header:e.header,sortable:!0})});return i.a.createElement(At.DataTable,{ref:function(e){a.dt=e},value:e,rows:10,paginator:!0,header:a.header},n)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tile.properties,t=e.search;e.type.default||(this.setState({globalFilter:t}),this.fetchData())}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.setState({loading:!0}),this.fetchData())}},{key:"render",value:function(){var e,t=this,a=this.state,r=a.loading,n=a.globalFilter,l=this.props.tile.properties,o=l.option,s=l.type,c=l.showHeader;if(s.default)return Mt();if(this.header=c?i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement(de.InputText,{type:"search",value:n,onChange:function(e){e.stopPropagation(),console.log(e.target.value),t.setState({globalFilter:e.target.value})},placeholder:"Search",size:"50"}),i.a.createElement("span",{style:{marginLeft:"1rem",marginTop:".5rem",cursor:"pointer",display:"inline-block"},title:"Refresh Data",onClick:function(e){t.setState({loading:!0}),t.fetchData()}},i.a.createElement(re.c,{size:"1rem",style:{height:"1rem"}})),i.a.createElement("span",{style:{marginLeft:"1rem",cursor:"pointer"},title:"Export data as csv",onClick:function(e){t.export()}},i.a.createElement(re.e,{size:"1rem",style:{height:"1rem"},onClick:this.export}))):i.a.createElement(i.a.Fragment,null),r)return i.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},i.a.createElement(A.ScaleLoader,{sizeUnit:"px",size:30,color:"#fff"}));switch(o.value){case"dataItems":e=this.renderDataItemTable();break;case"alarms":e=this.renderAlarmTable();break;case"events":e=this.renderEventTable();break;case"files":e=this.renderFileTable();break;default:e=this.renderDataItemTable()}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"table-background",style:{height:"100%",width:"100%"}},i.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()}},e)))}}]),t}(n.Component);var St=Object(s.b)(function(e){return{currentData:e.currentData}})(Lt),Pt=a(189);var Bt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).chartInit=function(){var e=a.props.tile,t=e.id,r=e.properties,n=Number(r.max),i=a.props.currentData.object[r.dataItem.dataItemId],l=r.color;he.j.commercialLicense=!0,a.chart=he.h(t,ut.o),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0;var o=a.chart.createChild(he.d);o.text="Max: ".concat(n),o.align="center";var s=a.chart.createChild(he.d);s.text=""!==r.name?r.name:"".concat(i.alias),s.align="center",s.isMeasured=!1,s.x=he.k(50),s.horizontalCenter="middle",s.y=he.k(0);var c=a.chart.xAxes.push(new ut.a);c.dataFields.category="category",c.renderer.grid.template.location=0,c.renderer.grid.template.strokeOpacity=0;var d=a.chart.yAxes.push(new ut.m);d.renderer.grid.template.strokeOpacity=0,d.min=-20,d.max=120,d.strictMinMax=!0,d.renderer.baseGrid.disabled=!0,d.numberFormatter=new he.e,d.numberFormatter.numberFormat="";var u=a.chart.series.push(new ut.e);u.dataFields.valueY="fillValue",u.dataFields.categoryX="category",u.columns.template.width=he.k(80),u.columns.template.fillOpacity=.9,u.columns.template.strokeOpacity=1,u.columns.template.strokeWidth=2,""!==l&&(u.columns.template.fill="#".concat(l),u.columns.template.stroke="#".concat(l));var p=a.chart.series.push(new ut.e);p.dataFields.valueY="emptyValue",p.dataFields.categoryX="category",p.stacked=!0,p.columns.template.width=he.k(80),p.columns.template.fill=he.g("#000"),p.columns.template.fillOpacity=.1,p.columns.template.stroke=he.g("#000"),p.columns.template.strokeOpacity=.2,p.columns.template.strokeWidth=2,a.updateValue()},a.updateValue=function(){var e=a.props.tile.properties,t=a.props.currentData;try{var r=t.object[e.dataItem.dataItemId].value;a.chart.data=[{category:"".concat(Math.round(100*r)/100," ").concat(e.unit),fillValue:r/e.max*100,emptyValue:(e.max-r)/e.max*100}]}catch(n){a.chart.data=[{category:"undefined",fillValue:0,emptyValue:0}]}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tile.id;this.props.tile.properties.type.default?this.chart=function(e){he.j.commercialLicense=!0,new he.a;var t=he.h(e,ut.o);t.paddingRight=5,t.paddingLeft=0,t.paddingTop=5,t.paddingBottom=0,t.marginRight=5,t.marginLeft=0,t.marginTop=5,t.marginBottom=0,t.data=[{category:"Default Value",fillValue:50,emptyValue:75}];var a=t.createChild(he.d);a.text="Max: 100",a.align="center";var r=t.createChild(he.d);r.text="Cylinder Gauge",r.align="center",r.isMeasured=!1,r.x=he.k(50),r.horizontalCenter="middle",r.y=he.k(0);var n=t.xAxes.push(new ut.a);n.dataFields.category="category",n.renderer.grid.template.location=0,n.renderer.grid.template.strokeOpacity=0;var i=t.yAxes.push(new ut.m);i.renderer.grid.template.strokeOpacity=0,i.min=-20,i.max=120,i.strictMinMax=!0,i.renderer.baseGrid.disabled=!0,i.numberFormatter=new he.e,i.numberFormatter.numberFormat="";var l=t.series.push(new ut.e);l.dataFields.valueY="fillValue",l.dataFields.categoryX="category",l.columns.template.width=he.k(80),l.columns.template.fillOpacity=.9,l.columns.template.strokeOpacity=1,l.columns.template.strokeWidth=2;var o=t.series.push(new ut.e);return o.dataFields.valueY="emptyValue",o.dataFields.categoryX="category",o.stacked=!0,o.columns.template.width=he.k(80),o.columns.template.fill=he.g("#000"),o.columns.template.fillOpacity=.1,o.columns.template.stroke=he.g("#000"),o.columns.template.strokeOpacity=.2,o.columns.template.strokeWidth=2,t}(e):this.chartInit()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;if(t.type.default)return null;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),this.updateValue()}},{key:"render",value:function(){var e=this.props.tile.id;return i.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(n.Component);Bt.defaultProps={};var Rt=Object(s.b)(function(e){return{currentData:e.currentData}})(Bt),Nt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).chartInit=function(){var e=a.props.tile,t=e.id,r=e.properties;a.chart=he.h(t,ut.j),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=5,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.startAngle=-90,a.chart.endAngle=180,a.chart.innerRadius=he.k(10),a.chart.numberFormatter.numberFormat="#.##";var n=a.chart.yAxes.push(new ut.a);n.dataFields.category="category",n.renderer.grid.template.location=0,n.renderer.grid.template.strokeOpacity=0,n.renderer.labels.template.horizontalCenter="right",n.renderer.labels.template.fontWeight=300,n.renderer.labels.template.adapter.add("fill",function(e,t){return t.dataItem.index>=0?a.chart.colors.getIndex(t.dataItem.index):e}),n.renderer.minGridDistance=10;var i=a.chart.xAxes.push(new ut.m);i.renderer.grid.template.strokeOpacity=0,i.min=0,i.max=100,i.strictMinMax=!0,i.renderer.labels.template.adapter.add("text",function(e){return e>=100?"".concat(r.max," ").concat(r.unit?r.unit:""):e+"%"});var l=a.chart.series.push(new ut.k);l.dataFields.valueX="full",l.dataFields.categoryY="category",l.clustered=!1,l.columns.template.fill=(new he.c).getFor("alternativeBackground"),l.columns.template.fillOpacity=.08,l.columns.template.cornerRadiusTopLeft=20,l.columns.template.strokeWidth=0,l.columns.template.radarColumn.cornerRadius=20;var o=a.chart.series.push(new ut.k);o.dataFields.valueX="value",o.dataFields.categoryY="category",o.clustered=!1,o.columns.template.strokeWidth=0,o.columns.template.tooltipText="[bold]{raw} ".concat(r.unit?r.unit:""),o.columns.template.radarColumn.cornerRadius=20,o.columns.template.adapter.add("fill",function(e,t){return a.chart.colors.getIndex(t.dataItem.index)}),a.chart.cursor=new ut.l},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.chartInit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties,a=this.props.currentData;if(e.tile.properties!==t&&(this.chart.dispose(),this.chartInit()),t.dataItems&&a){for(var r=[],n=0;n<t.dataItems.length;n++){var i=t.dataItems[n],l=a.object[i.dataItemId];r[n]={category:l.alias,value:l.value/t.max*100,raw:l.value,full:t.max}}this.chart.data=r}}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props.tile.id;return i.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(n.Component);Nt.defaultProps={};var Ut=Object(s.b)(function(e){return{currentData:e.currentData}})(Nt),Wt=a(190),Ft=function(e){function t(){return Object(w.a)(this,t),Object(T.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.tile,t=e.id,a=e.properties;return i.a.createElement("div",{id:t,style:{width:"96%",height:"96%",margin:"auto",marginTop:"1.5rem",paddingBottom:"1.5rem",borderRadius:"5px"}},i.a.createElement(Wt.a,{url:a.url,style:{borderRadius:"5px"},width:"100%",height:"100%",className:"",display:"initial",position:"relative",allowFullScreen:!0}))}}]),t}(n.Component),Gt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).defaultConfig=function(){return i.a.createElement("div",{className:"indicator",style:{width:"100%",height:"100%",textAlign:"center",backgroundColor:a.props.defaultBackground}},i.a.createElement("span",null,"Indicator"),i.a.createElement("br",null),i.a.createElement("span",null,"Value: XX"))},a.config=function(){var e=a.props.tile.properties,t=e.labelColor,r=e.valueColor,n=e.backgroundColor,l=e.timestamp,o=a.props.tile.properties.dataItem.dataItemId,s=a.props.currentData?a.props.currentData.object[o]:{alias:"undefined",value:"undefined"};return i.a.createElement("div",{className:"indicator",style:{width:"100%",height:"100%",textAlign:"center",backgroundColor:"#".concat(n)}},i.a.createElement("span",{style:{color:"#".concat(t)}},s.alias),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#".concat(r)}},s.isString?s.stringValue:"".concat(s.value.toFixed(2)," ").concat(s.unit)),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#".concat(r)}},l?new Date(s.timestamp).toLocaleString():""))},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.tile.properties.type.default?this.defaultConfig():this.config()}}]),t}(n.Component);Gt.defaultProps={defaultValue:Math.floor(100*Math.random()),defaultBackground:"hsl(0,0%,".concat(Math.floor(20*Math.random()),"%)")};var Kt=Object(s.b)(function(e){return{currentData:e.currentData}})(Gt);var zt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).getData=function(){var e=a.props.currentData;return a.props.tile.properties.dataItems.map(function(t){return e.array.find(function(e){return t.dataItemId===e.dataItemId})})},a.chartInit=function(){var e=a.props.tile,t=e.id,r=e.properties,n=r.color,i=r.title,l=r.max,o=r.min;he.j.commercialLicense=!0,a.chart=he.h(t,ut.n),a.chart.paddingRight=5,a.chart.paddingLeft=0,a.chart.paddingTop=15,a.chart.paddingBottom=0,a.chart.marginRight=5,a.chart.marginLeft=0,a.chart.marginTop=5,a.chart.marginBottom=0,a.chart.data=a.getData();var s=a.chart.xAxes.push(new ut.a);s.dataFields.category="alias",s.renderer.grid.template.location=0,s.renderer.labels.template.rotation=315,s.renderer.labels.template.horizontalCenter="right",s.renderer.labels.template.verticalCenter="right",s.renderer.labels.template.paddingBottom=0,s.renderer.minGridDistance=30;var c=a.chart.yAxes.push(new ut.m);c.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"},{number:1e6,suffix:"M"},{number:1e9,suffix:"G"}],c.numberFormatter.numberFormat="#,###.##a",""!==l&&""!==o&&(c.max=+l,c.min=+o,c.strictMinMax=!0);var d=a.chart.series.push(new ut.d);d.dataFields.valueY="value",d.dataFields.categoryX="alias",d.name="Value",""!==n&&(d.columns.template.stroke=he.g("#".concat(n)),d.columns.template.fill=he.g("#".concat(n))),d.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",d.columns.template.fillOpacity=.8;var u=d.columns.template;if(u.strokeWidth=1,u.strokeOpacity=.9,""!==i){var p=a.chart.titles.create();p.text=i,p.marginBottom=5}},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.tile.id;this.props.tile.properties.type.default?this.chart=function(e){he.j.commercialLicense=!0;var t=he.h(e,ut.n);t.paddingRight=5,t.paddingLeft=0,t.paddingTop=15,t.paddingBottom=0,t.marginRight=5,t.marginLeft=0,t.marginTop=5,t.marginBottom=0,t.data=[{country:"USA",visits:2025},{country:"China",visits:1882},{country:"Japan",visits:1809},{country:"Germany",visits:1322},{country:"UK",visits:1122},{country:"France",visits:1114},{country:"India",visits:984},{country:"Spain",visits:711},{country:"Netherlands",visits:665},{country:"Russia",visits:580},{country:"South Korea",visits:443},{country:"Canada",visits:441},{country:"Brazil",visits:395}];var a=t.xAxes.push(new ut.a);a.dataFields.category="country",a.renderer.grid.template.location=0,a.renderer.minGridDistance=30,a.renderer.labels.template.adapter.add("dy",function(e,t){return t.dataItem&&!0&t.dataItem.index?e+25:e}),t.yAxes.push(new ut.m);var r=t.series.push(new ut.d);r.dataFields.valueY="visits",r.dataFields.categoryX="country",r.name="Visits",r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=.8;var n=r.columns.template;return n.strokeWidth=2,n.strokeOpacity=1,t}(e):this.chartInit()}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.tile.properties;e.tile.properties!==t&&(this.chart.dispose(),this.chartInit());try{this.chart.data=this.getData(),this.chart.invalidateRawData()}catch(a){console.log(a)}}},{key:"render",value:function(){var e=this.props.tile.id;return i.a.createElement("div",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(i.a.Component);zt.defaultProps={};var Vt=Object(s.b)(function(e){return{currentData:e.currentData}})(zt),qt={TileType:kt,Gauge:ht,BasicGraph:yt,AdvancedGraph:It,TextBox:Et.a,Map:wt,Table:St,CustomTable:Pt.a,CylinderGauge:Rt,SolidGauge:Ut,IframeTile:Ft,Indicator:Kt,BarGraph:Vt},Ht=function(e){function t(){return Object(w.a)(this,t),Object(T.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(C.a)(t,[{key:"handleEditTile",value:function(e){(0,this.props.toggleModal)(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.tile,r=t.deleteTile,n=t.activeTab,l=t.ui,o=a.properties.type&&qt[a.properties.type.value]?qt[a.properties.type.value]:qt.TileType,s=l.viewOnly?"none":"",c=l.viewOnly?"hidden":"",d=l.viewOnly?"tile-view":"tile-edit";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tile ".concat(d),style:{height:"100%",width:"100%"}},i.a.createElement("div",{className:"tile-toolbar",style:{visibility:c,position:"absolute",width:"100%",zIndex:99999}},i.a.createElement("span",{className:"tile-remove",style:{float:"right",zIndex:1e3,display:s},title:"Click to delete tile",onClick:function(){return r(a.id,n)}}," ",i.a.createElement(re.g,{style:{height:"1rem"}})),i.a.createElement("span",{style:{zIndex:1e3,cursor:"pointer",display:s,paddingLeft:"3px"},title:"Click to Edit tile",onClick:function(t){return e.handleEditTile(a)}}," ",i.a.createElement(re.f,{style:{height:"1rem"},size:"1rem"}))),i.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onTouchStart:function(e){return e.stopPropagation()},style:{height:"100%",width:"100%"}},i.a.createElement(o,{tile:a}))))}}]),t}(n.Component);var Xt=Object(s.b)(function(e){return{activeTab:e.activeTab,ui:e.ui}},r)(Ht),Yt=Object(dt.WidthProvider)(dt.Responsive),Jt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).renderGrids=function(e){var t=a.props,r=t.tiles,n=t.layouts,l=t.activeTab,o=l.index===e.index?"visible":"hidden",s=l.index===e.index?"":0;return i.a.createElement("div",{style:{visibility:o,height:s},key:e.index},i.a.createElement(Yt,{style:{visibility:o,height:s},key:e.index,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:1},cols:{lg:96,md:96,sm:96,xs:24,xxs:1},rowHeight:10,layouts:n[e.index],onLayoutChange:function(t,r){return a.handleLayoutChange(t,r,e)}},r[e.index]&&r[e.index].map(a.renderTile)))},a.renderTile=function(e){var t=a.props.ui.viewOnly?"no-resize":"";return i.a.createElement("div",{key:e.id,"data-grid":e.dataGrid,className:t},i.a.createElement(Xt,{tile:e,toggleModal:a.toggleModal}))},a.handleLayoutChange=function(e,t,r){a.props.saveLayouts(t,r)},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{var t=this.props.data.attributes,a=t.object.refreshRate?t.object.refreshRate.attributeValue:1e4;this.interval=setInterval(function(){return e.props.currentData()},a)}catch(r){this.interval=setInterval(function(){return e.props.currentData()},1e4)}}},{key:"render",value:function(){var e=this.props.tabs;return i.a.createElement(i.a.Fragment,null,e&&e.map(this.renderGrids))}}]),t}(n.Component);var $t=Object(s.b)(function(e){return{activeTab:e.activeTab,layouts:e.layouts,tiles:e.tiles,ui:e.ui,tabs:e.tabs,data:e.data}},r)(Jt),Qt=(a(321),a(192));a(312);he.l(Qt.a),he.j.autoSetClassName=!0,he.j.minPolylineStep=5;var Zt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0},a}return Object(k.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(D.a.mark(function e(){var t=this;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:return e.next=5,Promise.all([this.props.loadDashboard(),this.props.currentData(),this.props.dataItemDefinitions(),this.props.assetData(),this.props.attributes(),this.props.assetDefinitionData()]).then(function(){return t.setState({loading:!1})});case 5:"builder"===P("mode")&&this.props.toggleViewOnly(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),this.setState({loading:"failed"});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loading;return"failed"===e?i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{toggleSidebar:this.toggleSidebar}),i.a.createElement("section",{style:{height:"94vh"}},i.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%)"}},i.a.createElement("h2",null,"Failed to load Dashboard. Please refresh.")))):e?i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{toggleSidebar:this.toggleSidebar}),i.a.createElement("section",{style:{height:"94vh"}},i.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%)"}},i.a.createElement(A.PulseLoader,{sizeUnit:"px",size:20,color:ft.a.fontColor})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{toggleSidebar:this.toggleSidebar}),i.a.createElement(nt,{className:"sidebar"}),i.a.createElement(ct,null),i.a.createElement(ot,null),i.a.createElement($t,{className:"main"}))}}]),t}(n.Component),ea=Object(s.b)(null,r)(Zt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ta=function(e){var t=Object(c.applyMiddleware)(u.a),a=Object(d.composeWithDevTools)(t);return Object(c.createStore)(E,e,a)}();o.a.render(i.a.createElement(s.a,{store:ta},i.a.createElement(ea,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},35:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r={BASE_URL:"",TOKEN:""}},87:function(e,t,a){e.exports={fontColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(255, 255, 255, 0.2)"}}},[[195,6,2]]]);
//# sourceMappingURL=main.e30ec253.chunk.js.map